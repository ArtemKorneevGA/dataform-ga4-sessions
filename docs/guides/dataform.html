<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mermaid/8.8.4/mermaid.min.js"></script>
<script src="/init.js"></script><title data-react-helmet="true">Dataform Basics | Dataform GA4 Sessions</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://ArtemKorneevGA.github.io/dataform-ga4-sessions/guides/dataform"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Dataform Basics | Dataform GA4 Sessions"><meta data-react-helmet="true" name="description" content="This is a just a short overview of Dataform need in the context of the package description. For more details please read official documentation."><meta data-react-helmet="true" property="og:description" content="This is a just a short overview of Dataform need in the context of the package description. For more details please read official documentation."><link data-react-helmet="true" rel="shortcut icon" href="/dataform-ga4-sessions/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://ArtemKorneevGA.github.io/dataform-ga4-sessions/guides/dataform"><link data-react-helmet="true" rel="alternate" href="https://ArtemKorneevGA.github.io/dataform-ga4-sessions/guides/dataform" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://ArtemKorneevGA.github.io/dataform-ga4-sessions/guides/dataform" hreflang="x-default"><link rel="stylesheet" href="/dataform-ga4-sessions/assets/css/styles.04041f29.css">
<link rel="preload" href="/dataform-ga4-sessions/assets/js/runtime~main.a6d437cf.js" as="script">
<link rel="preload" href="/dataform-ga4-sessions/assets/js/main.db21b18a.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/dataform-ga4-sessions/"><img src="/dataform-ga4-sessions/img/logo.png" alt="Dataform GA4 Sessions" class="themedImage_TMUO themedImage--light_4Vu1 navbar__logo"><img src="/dataform-ga4-sessions/img/logo.png" alt="Dataform GA4 Sessions" class="themedImage_TMUO themedImage--dark_uzRr navbar__logo"><b class="navbar__title">Dataform GA4 Sessions</b></a><a class="navbar__item navbar__link navbar__link--active" href="/dataform-ga4-sessions/">Docs</a><a class="navbar__item navbar__link navbar__link--active" href="/dataform-ga4-sessions/api">API Reference</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/ArtemKorneevGA/dataform-ga4-sessions" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_2i4l react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_iYfV">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_iYfV">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button class="clean-btn backToTopButton_i9tI" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh menuWithAnnouncementBar_+O1J"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/dataform-ga4-sessions/">Introduction</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Guides</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/dataform-ga4-sessions/guides/installation">Installation</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/dataform-ga4-sessions/guides/dataform">Dataform Basics</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/dataform-ga4-sessions/guides/scheduling-daily">Scheduling - Daily updates</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/dataform-ga4-sessions/guides/scheduling-advanced">Scheduling - Advanced</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/dataform-ga4-sessions/guides/troubleshooting">Troubleshooting</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/dataform-ga4-sessions/guides/unit-tests">Unit Tests</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Sessions</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Events</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/dataform-ga4-sessions/api">API Reference</a></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Dataform Basics</h1></header><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>This is a just a short overview of Dataform need in the context of the package description. For more details please read <a href="https://cloud.google.com/dataform/docs/overview" target="_blank" rel="noopener noreferrer">official documentation</a>.</p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="what-is-dataform"></a>What is Dataform?<a class="hash-link" href="#what-is-dataform" title="Direct link to heading">#</a></h2><p>A few main facts about Dataform:</p><ul><li>it&#x27;s a tool for T (transformation) in you ETL (extract, transform, load) processes</li><li>it&#x27;s already in BigQuery, you don&#x27;t need to install anything</li><li>it&#x27;s free</li><li>it uses JavaScript</li><li>you could create your own package (like this one)</li><li>it&#x27;s really cool (and super cool compared to scheduling queries)</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="how-does-it-work"></a>How does it work?<a class="hash-link" href="#how-does-it-work" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="sqlx"></a>SQLX<a class="hash-link" href="#sqlx" title="Direct link to heading">#</a></h3><p>You should define <code>.sqlx</code> files with SELECT statement and configuration block (they call them actions). All actions should be inside <code>definitions</code> folder or it subfolders.</p><p>So for example if you create <code>definitions/test.sqlx</code> file:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">config </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">type</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;table&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">select </span><span class="token string" style="color:#e3116c">&quot;dataform&quot;</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">as</span><span class="token plain"> cool_tool</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>And if you run action (by clicking &quot;Start Execution / Actions&quot; and selecting &quot;test&quot;) you will get table <code>test</code> inside <code>dataform</code> dataset with one row and one column full of true.</p><p>Magic! You just define SELECT and dataform creates table for you. And each time you run action it will recreate table, in our case you will always have only one row with the same result.</p><p>Of course you could query any BigQuery table in your <code>SELECT</code> for example GA4 export tables.</p><p>Dataform support a few types of actions:</p><ul><li>table</li><li>incremental table</li><li>assertion</li><li>view</li><li>operation</li><li>test</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="incremental-tables"></a>Incremental tables<a class="hash-link" href="#incremental-tables" title="Direct link to heading">#</a></h3><p>In our context the most important type is the <code>incremental</code>. Incremental type generate two queries: one for creating tables (<code>non-incremental</code>) and one for updating tables (<code>incremental</code>). For updating Dataform generate INSERT statement and for each run instead of recreating table it adds new rows into the table.</p><p>If in our example we change action type to <code>incremental</code>:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">config </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">type</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;incremental&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">select </span><span class="token string" style="color:#e3116c">&quot;dataform&quot;</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">as</span><span class="token plain"> cool_tool</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>And run test action twice we will get table with two rows.</p><p>So for GA4 data processing it means we could define <code>definitions/sessions.sqlx</code> file with <code>SELECT</code> statement that queries GA4 raw events only for the last day and returns sessions. The package provides <code>Session</code> and <code>Event</code> classes with <code>publish</code> method that generates <code>SELECT</code> statement for you. And to keep data fresh you need to run this action every day as soon as GA4 exports data to BigQuery.</p><p>One more benifit of incremental type, if for provide <code>uniqueKey</code> parameter, Dataform will generate <code>MERGE</code> statement instead of <code>INSERT</code>. The beauty of <code>MERGE</code> is that it <code>INSERT</code> new values and <code>UPDATE</code> existing ones based on <code>uniqueKey</code>. It means if for some reason you run the same action twice on the same day - you don&#x27;t double the same sessions, you just refresh (<code>UPDATE</code>) them.</p><p>The package by default creates <code>incremental</code> actions with <code>uniqueKey</code> parameters [<code>session_id</code>,<code>date</code>] and [<code>event_id</code>,<code>date</code>] for sessions and events tables respectively.</p><p>And also Dataform provides <a href="https://cloud.google.com/dataform/docs/reference/dataform-core-reference#itablecontext" target="_blank" rel="noopener noreferrer">JavaScript API</a> you could use in your actions.</p><p>One of this helpers is <code>incremental()</code> function, that returns <code>true</code> when the current context is incremental. And using this function you could select different source tables for the first run and for the next runs, or <code>SELECT</code> from all days for the first run and only from the last day for next runs. <code>Session</code> and <code>Event</code> provides <code>incrementalTableName</code> and <code>nonIncrementalTableName</code> properties to set tables for incremental and non-incremental context.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="ref"></a>ref()<a class="hash-link" href="#ref" title="Direct link to heading">#</a></h3><p><a href="https://cloud.google.com/dataform/docs/reference/dataform-core-reference#itablecontext" target="_blank" rel="noopener noreferrer">ref()</a> is one of the most important Dataform functions. It allows you to reference other actions (table). And the benefit of using it is that Dataform could build dependencies based on <code>ref()</code> function. For example, if you create report and want to select data from <code>sessions</code> table generated by the package, you could write something like this:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">config </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">type</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;table&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token constant" style="color:#36acaa">SELECT</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">FROM</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token function" style="color:#d73a49">ref</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;sessions&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>And when you run all actions for daily update you don&#x27;t need to care about execution order. At first Dataform will run <code>sessions</code> action and only after that <code>lp_report</code> action (because it depends on <code>sessions</code>). So that&#x27;s why it&#x27;s important to use <code>ref()</code> in all your actions.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="define-sources"></a>Define sources<a class="hash-link" href="#define-sources" title="Direct link to heading">#</a></h3><p>You could use <code>ref()</code> to reference all actions created in your Dataform project. But to reference source tables that exist outside of Dataform, you should declare them first.</p><p>Dataform has a special action for this: <a href="https://cloud.google.com/dataform/docs/declare-source" target="_blank" rel="noopener noreferrer">declare</a>. You could create <code>definitions/sources/ga4.sqlx</code> file with the following code:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">   config </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">type</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;declaration&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">schema</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;analytics_XXXXXX&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;events_XXXXXX&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>And after thatm you could query from this table like this:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">select * from ${ref(&quot;events_XXXXXX&quot;)}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>The package also expected that sources should be defined first. And it provides a special helper method: <code>declareSources()</code>.</p><p>So for example you could create <code>definitions/sources/ga4.js</code> file with the following code:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> ga4 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;dataform-ga4-sessions&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Define your config</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> config </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">dataset</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;analytics_XXXXXX&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">incrementalTableName</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;events_XXXXXX&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Declare GA4 source tables</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">ga4</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">declareSources</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">config</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>And after that, you and the package could use <code>ref(&quot;events_XXXXXX&quot;)</code> in the actions.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="dataform-project-structure"></a>Dataform project structure<a class="hash-link" href="#dataform-project-structure" title="Direct link to heading">#</a></h3><p>And a few words about Dataform folders. Dataform&#x27;s documentation provides recomendations about project structure. Inside <code>definitions</code> folder you should create subfolders:</p><ul><li><code>sources</code> - for source definitions</li><li><code>staging</code> - for intermediate tables</li><li><code>reporting</code> - for reporting tables</li></ul><p>It&#x27;s a good starting point, before you really grow up to dozens of actions.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="tags"></a>Tags<a class="hash-link" href="#tags" title="Direct link to heading">#</a></h3><p>One more important Dataform concept is tags. You could add tags to your actions and then run only actions with specific tags. For example you could add <code>staging</code> tag to all actions inside <code>staging</code> folder and run only them. Or you could add a <code>daily</code> tag to all actions you want to run daily.</p><p>The package by default add tag with source datset name (like <code>analytics_XXXXXX</code>) for all actions it creates. The reason behind this is that you could export data from a few GA4 accounts in the same GCP. And in this case, you need to separate configuration and execution for each GA4 account. So you could run only actions for specific GA4 dataset with specific tag (dataset name).</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/docusaurus/edit/main/website/docs/guides/dataform.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mt2f"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/dataform-ga4-sessions/guides/installation"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Installation</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/dataform-ga4-sessions/guides/scheduling-daily"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Scheduling - Daily updates Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#what-is-dataform" class="table-of-contents__link">What is Dataform?</a></li><li><a href="#how-does-it-work" class="table-of-contents__link">How does it work?</a><ul><li><a href="#sqlx" class="table-of-contents__link">SQLX</a></li><li><a href="#incremental-tables" class="table-of-contents__link">Incremental tables</a></li><li><a href="#ref" class="table-of-contents__link">ref()</a></li><li><a href="#define-sources" class="table-of-contents__link">Define sources</a></li><li><a href="#dataform-project-structure" class="table-of-contents__link">Dataform project structure</a></li><li><a href="#tags" class="table-of-contents__link">Tags</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2024 Artem Korneev. Built with Docusaurus.</div></div></div></footer></div>
<script src="/dataform-ga4-sessions/assets/js/runtime~main.a6d437cf.js"></script>
<script src="/dataform-ga4-sessions/assets/js/main.db21b18a.js"></script>
</body>
</html>