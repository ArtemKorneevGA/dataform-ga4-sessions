<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mermaid/8.8.4/mermaid.min.js"></script>
<script src="/init.js"></script><title data-react-helmet="true">Scheduling - Daily updates | Dataform GA4 Sessions</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://ArtemKorneevGA.github.io/dataform-ga4-sessions/guides/scheduling-daily"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Scheduling - Daily updates | Dataform GA4 Sessions"><meta data-react-helmet="true" name="description" content="I usumed that you already know how to careate sessions and events tables and now you want to schedule daily updates."><meta data-react-helmet="true" property="og:description" content="I usumed that you already know how to careate sessions and events tables and now you want to schedule daily updates."><link data-react-helmet="true" rel="shortcut icon" href="/dataform-ga4-sessions/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://ArtemKorneevGA.github.io/dataform-ga4-sessions/guides/scheduling-daily"><link data-react-helmet="true" rel="alternate" href="https://ArtemKorneevGA.github.io/dataform-ga4-sessions/guides/scheduling-daily" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://ArtemKorneevGA.github.io/dataform-ga4-sessions/guides/scheduling-daily" hreflang="x-default"><link rel="stylesheet" href="/dataform-ga4-sessions/assets/css/styles.04041f29.css">
<link rel="preload" href="/dataform-ga4-sessions/assets/js/runtime~main.dedb1c8a.js" as="script">
<link rel="preload" href="/dataform-ga4-sessions/assets/js/main.2088aa4c.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/dataform-ga4-sessions/"><img src="/dataform-ga4-sessions/img/logo.png" alt="Dataform GA4 Sessions" class="themedImage_TMUO themedImage--light_4Vu1 navbar__logo"><img src="/dataform-ga4-sessions/img/logo.png" alt="Dataform GA4 Sessions" class="themedImage_TMUO themedImage--dark_uzRr navbar__logo"><b class="navbar__title">Dataform GA4 Sessions</b></a><a class="navbar__item navbar__link navbar__link--active" href="/dataform-ga4-sessions/">Docs</a><a class="navbar__item navbar__link navbar__link--active" href="/dataform-ga4-sessions/api">API Reference</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/ArtemKorneevGA/dataform-ga4-sessions" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_2i4l react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_iYfV">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_iYfV">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button class="clean-btn backToTopButton_i9tI" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh menuWithAnnouncementBar_+O1J"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/dataform-ga4-sessions/">Introduction</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Guides</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/dataform-ga4-sessions/guides/installation">Installation</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/dataform-ga4-sessions/guides/dataform">Dataform Basics</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/dataform-ga4-sessions/guides/scheduling-daily">Scheduling - Daily updates</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/dataform-ga4-sessions/guides/scheduling-advanced">Scheduling - Advanced</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/dataform-ga4-sessions/guides/unit-tests">Unit Tests</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Sessions</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Events</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/dataform-ga4-sessions/api">API Reference</a></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Scheduling - Daily updates</h1></header><p>I usumed that you already know how to careate <a href="/dataform-ga4-sessions/sessions/create-session">sessions</a> and <a href="/dataform-ga4-sessions/events/create-event">events</a> tables and now you want to schedule daily updates.</p><p>The easiest way to do it is to use Dataform&#x27;s <a href="https://cloud.google.com/dataform/docs/workflow-configurations" target="_blank" rel="noopener noreferrer">workflow configurations</a>.</p><p>Dataform run actions in a two steps: it compiles your Dataform project (release configuration) and then executes release configuration (workflow configuration). So you need to setup both these steps.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="create-release-configuration"></a>Create release configuration<a class="hash-link" href="#create-release-configuration" title="Direct link to heading">#</a></h2><p>In your Dataform repository select Release configuration tab and click &quot;New release configuration&quot; button.</p><p><img src="/dataform-ga4-sessions/assets/images/new-release-configuration-6496a240110576a1b750d78a49cd8d49.png"></p><p>And fill out the form:</p><ul><li>Set Release ID (name) for something like <code>production</code></li><li>Git commitish (GitHub branch name) to <code>main</code></li><li>Frequency to <code>Daily</code> by default. It means how often Dataform should recompile your project. If you don&#x27;t change your code often you could select <code>Never</code> and recompile configuration manually after your changes.</li><li>Timezone - you could change the timezone if you need to. By default it&#x27;s UTC.</li></ul><p>For this example we don&#x27;t need to change Compilation overrides and Compilation variables.</p><p>Click &quot;Create&quot; button to create release configuration.</p><p><img src="/dataform-ga4-sessions/assets/images/release-configuration-form-6ef321d89c268f3d8d39ebaa3dc042c7.png"></p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="create-workflow-configuration"></a>Create workflow configuration<a class="hash-link" href="#create-workflow-configuration" title="Direct link to heading">#</a></h2><p>In your Dataform repository page select Workflow configuration tab and click &quot;New workflow configuration&quot; button.</p><p><img src="/dataform-ga4-sessions/assets/images/new-workflow-configuration-77f9a1a3eda2d3f3ea02f7ed75ffe8cf.png"></p><p>And fill out the form:</p><ul><li>Set Configuration ID (name) for something like <code>production-daily</code></li><li>Release configuration - Select release configuration we just created <code>production</code></li><li>Service account - you could select default service account or keep it empty.</li><li>Frequency - set it to daily <code>0 0 * * *</code>, you could provide any frequency in crontab format. Or use something like <a href="https://crontab.guru/every-day" target="_blank" rel="noopener noreferrer">crontab.guru</a> to generate it.</li><li>Timezone - you could change the timezone if you need to. By default it&#x27;s UTC.</li><li>Select actions you want to run. By defualt it&#x27;s all actions in your Dataform project. But you could select only needed actions or <a href="/dataform-ga4-sessions/guides/dataform#tags">tags</a>.</li></ul><p>Create &quot;Create&quot; button to create a workflow configuration.</p><p><img src="/dataform-ga4-sessions/assets/images/workflow-configuration-form-fca57e3b4153ac448516102140167f72.png"></p><p>That&#x27;s all, Dataform will run your actions daily.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="change-sessions-and-events-tables"></a>Change sessions and events tables<a class="hash-link" href="#change-sessions-and-events-tables" title="Direct link to heading">#</a></h2><p>But for daily updates you need to query only the previous date table, but sometimes GA4 delays data export for two days, so it&#x27;s safe to query the last two days. You could do it like this:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> ga4 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;dataform-ga4-sessions&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> config </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">incrementalTableName</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;events_*&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">incrementalTableEventStepWhere</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;_TABLE_SUFFIX between format_date(&#x27;%Y%m%d&#x27;,date_sub(current_date(), interval 3 day)) and format_date(&#x27;%Y%m%d&#x27;,date_sub(current_date(), interval 1 day)) and contains_substr(_TABLE_SUFFIX, &#x27;intraday&#x27;) is false&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">nonIncrementalTableName</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;events_*&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">nonIncrementalTableEventStepWhere</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;contains_substr(_TABLE_SUFFIX, &#x27;intraday&#x27;) is false&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> sessions </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">ga4</span><span class="token class-name punctuation" style="color:#393A34">.</span><span class="token class-name">Session</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">config</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">sessions</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">publish</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Line by line:</p><ul><li>incrementalTableName: &quot;events_*&quot; - here we set incremental table name to <code>events_*</code> so for incremental context Dataform will query all daily tables. So we need to filter them by providing were statement.</li><li>incrementalTableEventStepWhere - here we provide where statement for incremental context. We control which tables to query using <code>_TABLE_SUFFIX</code>. So here set that we need to query only tables for the previous two days (excluding today date) and format dates in GA4 tables format like <code>20231220</code> (&#x27;%Y%m%d&#x27;). and the second condition is to exclude intraday tables. It&#x27;s a good practice to exclude intraday tables because they could be incomplete and save them in different tables. You could read more about intraday tables in <a href="/dataform-ga4-sessions/sessions/intraday-sessions">intraday sessions tutorial</a>.</li><li>nonIncrementalTableName: &quot;events_*&quot; - here we set non incremental table name to <code>events_*</code>. It&#x27;s mandatory, as by default the package uses the same table name. It means that for the first run we will filter all daily tables.</li><li>nonIncrementalTableEventStepyWhere - here we filter intraday tables for the first run. Again it&#x27;s a good practice to exclude intraday tables because they could be incomplete.</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="deside-at-what-time-to-run-actions"></a>Deside at what time to run actions<a class="hash-link" href="#deside-at-what-time-to-run-actions" title="Direct link to heading">#</a></h2><p>At the moment doesn&#x27;t guarantee that GA4 exports will be ready at the same time every day. Even for GA4 360 clients. So if you are using this scheduling method you need to decide at what time to run actions.</p><p>You could check it manually using the following query, but don&#x27;t forget to change <code>&lt;GCP-PROJECT-ID&gt;</code> to your GCP project id and <code>analytics_XXXXXX</code> to your actual dataset name:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI sql"><pre tabindex="0" class="prism-code language-sql codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">javascript</span></span><span class="token-line" style="color:#393A34"><span class="token identifier" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token identifier">``</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token keyword" style="color:#00009f">sql</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  table_name</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  creation_time</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  EXTRACT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">hour</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> creation_time</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> creation_hour</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  DATETIME_DIFF</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">datetime</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">creation_time</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> PARSE_DATETIME</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;%Y%m%d&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> substr</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">table_name</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token keyword" style="color:#00009f">hour</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> creation_delay</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">&lt;GCP-PROJECT-ID&gt;</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">analytics_XXXXXX</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">INFORMATION_SCHEMA</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">TABLES</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> p</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain">  regexp_contains</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">table_name</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> r</span><span class="token string" style="color:#e3116c">&#x27;events_\d+&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">ORDER</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">BY</span><span class="token plain"> table_name </span><span class="token keyword" style="color:#00009f">DESC</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Or even get the maximum and average delay:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI sql"><pre tabindex="0" class="prism-code language-sql codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">max</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">DATETIME_DIFF</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">datetime</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">creation_time</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> PARSE_DATETIME</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;%Y%m%d&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> substr</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">table_name</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token keyword" style="color:#00009f">hour</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> max_hours_delay</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">round</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">avg</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">DATETIME_DIFF</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">datetime</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">creation_time</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> PARSE_DATETIME</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;%Y%m%d&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> substr</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">table_name</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token keyword" style="color:#00009f">hour</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> avg_hours_delay</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">&lt;GCP-PROJECT-ID&gt;</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">analytics_XXXXXX</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">INFORMATION_SCHEMA</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">TABLES</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> p</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain">  regexp_contains</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">table_name</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> r</span><span class="token string" style="color:#e3116c">&#x27;events_\d+&#x27;</span><span class="token punctuation" style="color:#393A34">)</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Usually it&#x27;s something between 30 and 46 hours.</p><p>As an option you could create two workflow configurations per day. It&#x27;s should be safe enough, as action generated by the package creates <code>MERGE</code> statement and you wouldn&#x27;t have doubles for the same sessions.</p><p>Or you could use a more advanced scheduling method - <a href="/dataform-ga4-sessions/guides/scheduling-advanced">scheduling - intraday</a>.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/docusaurus/edit/main/website/docs/guides/scheduling-daily.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mt2f"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/dataform-ga4-sessions/guides/dataform"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Dataform Basics</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/dataform-ga4-sessions/guides/scheduling-advanced"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Scheduling - Advanced Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#create-release-configuration" class="table-of-contents__link">Create release configuration</a></li><li><a href="#create-workflow-configuration" class="table-of-contents__link">Create workflow configuration</a></li><li><a href="#change-sessions-and-events-tables" class="table-of-contents__link">Change sessions and events tables</a></li><li><a href="#deside-at-what-time-to-run-actions" class="table-of-contents__link">Deside at what time to run actions</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/dataform-ga4-sessions/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://gtm-gear.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog</a></li><li class="footer__item"><a href="https://github.com/ArtemKorneevGA/dataform-ga4-sessions" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2023 Artem Korneev, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/dataform-ga4-sessions/assets/js/runtime~main.dedb1c8a.js"></script>
<script src="/dataform-ga4-sessions/assets/js/main.2088aa4c.js"></script>
</body>
</html>