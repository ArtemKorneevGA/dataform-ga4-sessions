"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[311],{3905:(e,n,t)=>{t.d(n,{Zo:()=>c,kt:()=>f});var s=t(7294);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);n&&(s=s.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,s)}return t}function r(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){i(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function a(e,n){if(null==e)return{};var t,s,i=function(e,n){if(null==e)return{};var t,s,i={},o=Object.keys(e);for(s=0;s<o.length;s++)t=o[s],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(s=0;s<o.length;s++)t=o[s],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var d=s.createContext({}),l=function(e){var n=s.useContext(d),t=n;return e&&(t="function"==typeof e?e(n):r(r({},n),e)),t},c=function(e){var n=l(e.components);return s.createElement(d.Provider,{value:n},e.children)},p="mdxType",u={inlineCode:"code",wrapper:function(e){var n=e.children;return s.createElement(s.Fragment,{},n)}},m=s.forwardRef((function(e,n){var t=e.components,i=e.mdxType,o=e.originalType,d=e.parentName,c=a(e,["components","mdxType","originalType","parentName"]),p=l(t),m=i,f=p["".concat(d,".").concat(m)]||p[m]||u[m]||o;return t?s.createElement(f,r(r({ref:n},c),{},{components:t})):s.createElement(f,r({ref:n},c))}));function f(e,n){var t=arguments,i=n&&n.mdxType;if("string"==typeof e||i){var o=t.length,r=new Array(o);r[0]=m;var a={};for(var d in n)hasOwnProperty.call(n,d)&&(a[d]=n[d]);a.originalType=e,a[p]="string"==typeof e?e:i,r[1]=a;for(var l=2;l<o;l++)r[l]=t[l];return s.createElement.apply(null,r)}return s.createElement.apply(null,t)}m.displayName="MDXCreateElement"},8317:(e,n,t)=>{t.r(n),t.d(n,{contentTitle:()=>r,default:()=>p,frontMatter:()=>o,metadata:()=>a,toc:()=>d});var s=t(7462),i=(t(7294),t(3905));const o={sidebar_position:7},r="Session id",a={unversionedId:"sessions/session-id",id:"sessions/session-id",isDocsHomePage:!1,title:"Session id",description:"Session id is a unique identifier of the session. By default it's a combination of:",source:"@site/docs/sessions/session-id.md",sourceDirName:"sessions",slug:"/sessions/session-id",permalink:"/dataform-ga4-sessions/sessions/session-id",editUrl:"https://github.com/facebook/docusaurus/edit/main/website/docs/sessions/session-id.md",tags:[],version:"current",sidebarPosition:7,frontMatter:{sidebar_position:7},sidebar:"tutorialSidebar",previous:{title:"Processing Steps",permalink:"/dataform-ga4-sessions/sessions/processing-steps"},next:{title:"Default session assertions",permalink:"/dataform-ga4-sessions/sessions/assertions"}},d=[],l={toc:d},c="wrapper";function p(e){let{components:n,...t}=e;return(0,i.kt)(c,(0,s.Z)({},l,t,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"session-id"},"Session id"),(0,i.kt)("p",null,"Session id is a unique identifier of the session. By default it's a combination of:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"user_pseudo_id (aka client_id)"),(0,i.kt)("li",{parentName:"ul"},"ga_session_id (the value from ",(0,i.kt)("inlineCode",{parentName:"li"},"event_params")," with key ",(0,i.kt)("inlineCode",{parentName:"li"},"ga_session_id"),")")),(0,i.kt)("p",null,"Each event during the session has the same session_id."),(0,i.kt)("div",{className:"admonition admonition-warning alert alert--danger"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"warning")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"It's possible that session_id could be not unique. The most common case is if events from the session are split between different days and you process the sessions only for one day per Dataform run. In this case, you could have the same session_id for different days."))),(0,i.kt)("p",null,"To generate ",(0,i.kt)("inlineCode",{parentName:"p"},"session_id")," the package uses ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/ArtemKorneevGA/dataform-ga4-helpers/blob/main/index.js#L182"},"getSqlSessionId")," helper function."),(0,i.kt)("p",null,"But you could change the logic of ",(0,i.kt)("inlineCode",{parentName:"p"},"session_id")," generation and provide your own SQL code, like this:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"const sessions = new ga4.Session(sessionConfig);\nsessions.getSqlUniqueId = () => {\n  return `FARM_FINGERPRINT(CONCAT((select value.int_value from unnest(event_params) where key = 'ga_session_id'), user_pseudo_id)) as session_id`;\n};\n")),(0,i.kt)("p",null,"If you want to change ",(0,i.kt)("inlineCode",{parentName:"p"},"session_id")," don't forget to add ",(0,i.kt)("inlineCode",{parentName:"p"},"session_id"),' alias ("as session_id" at the end) to your custom SQL code.'))}p.isMDXComponent=!0}}]);