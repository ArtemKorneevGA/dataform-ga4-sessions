"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[178],{3905:(e,t,s)=>{s.d(t,{Zo:()=>c,kt:()=>g});var n=s(7294);function r(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function o(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function a(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?o(Object(s),!0).forEach((function(t){r(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function i(e,t){if(null==e)return{};var s,n,r=function(e,t){if(null==e)return{};var s,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)s=o[n],t.indexOf(s)>=0||(r[s]=e[s]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)s=o[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}var p=n.createContext({}),l=function(e){var t=n.useContext(p),s=t;return e&&(s="function"==typeof e?e(t):a(a({},t),e)),s},c=function(e){var t=l(e.components);return n.createElement(p.Provider,{value:t},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var s=e.components,r=e.mdxType,o=e.originalType,p=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),d=l(s),m=r,g=d["".concat(p,".").concat(m)]||d[m]||u[m]||o;return s?n.createElement(g,a(a({ref:t},c),{},{components:s})):n.createElement(g,a({ref:t},c))}));function g(e,t){var s=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=s.length,a=new Array(o);a[0]=m;var i={};for(var p in t)hasOwnProperty.call(t,p)&&(i[p]=t[p]);i.originalType=e,i[d]="string"==typeof e?e:r,a[1]=i;for(var l=2;l<o;l++)a[l]=s[l];return n.createElement.apply(null,a)}return n.createElement.apply(null,s)}m.displayName="MDXCreateElement"},502:(e,t,s)=>{s.r(t),s.d(t,{contentTitle:()=>a,default:()=>d,frontMatter:()=>o,metadata:()=>i,toc:()=>p});var n=s(7462),r=(s(7294),s(3905));const o={sidebar_position:6},a="Processing Steps",i={unversionedId:"sessions/processing-steps",id:"sessions/processing-steps",isDocsHomePage:!1,title:"Processing Steps",description:"publish method of Session class processes raw GA4 data in a few steps. By default these steps are:",source:"@site/docs/sessions/processing-steps.md",sourceDirName:"sessions",slug:"/sessions/processing-steps",permalink:"/dataform-ga4-sessions/sessions/processing-steps",editUrl:"https://github.com/facebook/docusaurus/edit/main/website/docs/sessions/processing-steps.md",tags:[],version:"current",sidebarPosition:6,frontMatter:{sidebar_position:6},sidebar:"tutorialSidebar",previous:{title:"Channel Grouping",permalink:"/dataform-ga4-sessions/sessions/channel-grouping"},next:{title:"Session id",permalink:"/dataform-ga4-sessions/sessions/session-id"}},p=[{value:"Disable some steps",id:"disable-some-steps",children:[{value:"Post processing",id:"post-processing",children:[]}]}],l={toc:p},c="wrapper";function d(e){let{components:t,...s}=e;return(0,r.kt)(c,(0,n.Z)({},l,s,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"processing-steps"},"Processing Steps"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"/api#module_dataform-ga4-sessions..Event+publish"},"publish")," method of Session class processes raw GA4 data in a few steps. By default these steps are:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Step Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"events"),(0,r.kt)("td",{parentName:"tr",align:null},"Extract the needed columns from all events. Generate session_id")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"sessions_base"),(0,r.kt)("td",{parentName:"tr",align:null},"Group events into sessions by session id. Add standard columns like: session_start, session_end, session_engaged, landing_page etc.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"sessions_with_source_medium_and_lp"),(0,r.kt)("td",{parentName:"tr",align:null},"Apply source / medium rules to create last click attribution")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"sessions_with_channel"),(0,r.kt)("td",{parentName:"tr",align:null},"Add channel grouping based on source / medium")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"sessions_with_last_non_direct"),(0,r.kt)("td",{parentName:"tr",align:null},"Add last non direct attribution based on lookback window")))),(0,r.kt)("h2",{id:"disable-some-steps"},"Disable some steps"),(0,r.kt)("p",null,"Each step depends on the previous step. So you could disable some steps, but you couldn't change the order of the steps."),(0,r.kt)("p",null,"Here is an example of how to disable processing steps:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"const sessions = new ga4.Sessions(sessionConfig);\n\n// Ignore all processing steps except the first\nsessions.skipLastNonDirectStep();\nsessions.skipChannelStep();\nsessions.skipSourceMediumStep();\n\nsessions.publish();\n")),(0,r.kt)("p",null,"The order is important as each step uses the preceding step. So you can't skip the channel step and have a last_non_direct step. But you could delete all the steps, and add your own processing steps."),(0,r.kt)("h3",{id:"post-processing"},"Post processing"),(0,r.kt)("p",null,"As a final step ",(0,r.kt)("a",{parentName:"p",href:"/api#module_dataform-ga4-sessions..Session+_postProcessing"},"postProcessing")," is applied. At the moment, only the ",(0,r.kt)("inlineCode",{parentName:"p"},"delete")," type is supported for postProcessing."),(0,r.kt)("p",null,"By default ",(0,r.kt)("inlineCode",{parentName:"p"},"[source, medium, campaign]")," columns are deleted on postprocessing step. The reason is that on ",(0,r.kt)("inlineCode",{parentName:"p"},"sessions_with_source_medium_and_lp")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"sessions_with_last_non_direct")," steps source / medium columns are alredy copied to ",(0,r.kt)("inlineCode",{parentName:"p"},"last_click_attribution")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"last_non_direct_attribution")," columns accordingly."),(0,r.kt)("p",null,"You could also delete some columns from the result table if you only need them in intermediate steps. For example, like this:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'sessions.postProcessing.delete = [\n  ...sessions.postProcessing.delete,\n  ...["gclid", "content"],\n];\n')))}d.isMDXComponent=!0}}]);