"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[207],{3905:(e,t,a)=>{a.d(t,{Zo:()=>p,kt:()=>c});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var i=n.createContext({}),m=function(e){var t=n.useContext(i),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},p=function(e){var t=m(e.components);return n.createElement(i.Provider,{value:t},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},k=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,l=e.originalType,i=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),d=m(a),k=r,c=d["".concat(i,".").concat(k)]||d[k]||u[k]||l;return a?n.createElement(c,o(o({ref:t},p),{},{components:a})):n.createElement(c,o({ref:t},p))}));function c(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=a.length,o=new Array(l);o[0]=k;var s={};for(var i in t)hasOwnProperty.call(t,i)&&(s[i]=t[i]);s.originalType=e,s[d]="string"==typeof e?e:r,o[1]=s;for(var m=2;m<l;m++)o[m]=a[m];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}k.displayName="MDXCreateElement"},7480:(e,t,a)=>{a.r(t),a.d(t,{contentTitle:()=>o,default:()=>d,frontMatter:()=>l,metadata:()=>s,toc:()=>i});var n=a(7462),r=(a(7294),a(3905));const l={},o="API Reference",s={unversionedId:"api",id:"api",isDocsHomePage:!1,title:"API Reference",description:"dataform-ga4-sessions",source:"@site/docs/api.md",sourceDirName:".",slug:"/api",permalink:"/dataform-ga4-sessions/api",editUrl:"https://github.com/facebook/docusaurus/edit/main/website/docs/api.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Event id",permalink:"/dataform-ga4-sessions/events/event-id"}},i=[{value:"dataform-ga4-sessions",id:"dataform-ga4-sessions",children:[{value:"dataform-ga4-sessions~DataformAction",id:"dataform-ga4-sessionsdataformaction",children:[]},{value:"dataform-ga4-sessions~Event \u21d0 <code>DataformAction</code>",id:"dataform-ga4-sessionsevent--dataformaction",children:[]},{value:"dataform-ga4-sessions~EventFactory",id:"dataform-ga4-sessionseventfactory",children:[]},{value:"dataform-ga4-sessions~Session \u21d0 <code>DataformAction</code>",id:"dataform-ga4-sessionssession--dataformaction",children:[]},{value:"Default session processing steps",id:"default-session-processing-steps",children:[]},{value:"Default session assertions",id:"default-session-assertions",children:[]}]}],m={toc:i},p="wrapper";function d(e){let{components:t,...a}=e;return(0,r.kt)(p,(0,n.Z)({},m,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"api-reference"},"API Reference"),(0,r.kt)("a",{name:"module_dataform-ga4-sessions"}),(0,r.kt)("h2",{id:"dataform-ga4-sessions"},"dataform-ga4-sessions"),(0,r.kt)("p",null,"dataform-ga4-sessions module"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Example"),"  "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"const ga4 = require('dataform-ga4-sessions')\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions"},"dataform-ga4-sessions"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..DataformAction"},"~DataformAction"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#new_module_dataform-ga4-sessions..DataformAction_new"},"new DataformAction(sourceConfig, targetConfig)")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..DataformAction+_source"},"._source")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..DataformAction+_target"},"._target")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..DataformAction+_timezone"},"._timezone")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..DataformAction+_tags"},"._tags")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..DataformAction+_assertions"},"._assertions")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..DataformAction+_partitionBy"},"._partitionBy")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..DataformAction+_uniqueKey"},"._uniqueKey")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..DataformAction+_clusterBy"},"._clusterBy")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..DataformAction+_updatePartitionFilter"},"._updatePartitionFilter")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..DataformAction+_additionalOptions"},"._additionalOptions")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..DataformAction+_partitionExpirationDays"},"._partitionExpirationDays")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..DataformAction+_requirePartitionFilter"},"._requirePartitionFilter")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..DataformAction+_columns"},"._columns")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..DataformAction+_eventParams"},"._eventParams")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..DataformAction+_userProperties"},"._userProperties")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..DataformAction+_queryParameters"},"._queryParameters")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..DataformAction+addColumns"},".addColumns(columns)")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..DataformAction+addEventParams"},".addEventParams(eventParams)")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..DataformAction+addUserProperties"},".addUserProperties(userProperties)")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..DataformAction+addQueryParameters"},".addQueryParameters(queryParameters)")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..DataformAction+getSqlUniqueId"},".getSqlUniqueId()")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..DataformAction+publish"},".publish()")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..DataformAction+publishAssertions"},".publishAssertions()")))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..Event"},"~Event")," \u21d0 ",(0,r.kt)("code",null,"DataformAction"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#new_module_dataform-ga4-sessions..Event_new"},"new Event(sourceConfig, targetConfig)")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..Event+_uniqueKey"},"._uniqueKey")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..Event+_timestampEventParamName"},"._timestampEventParamName")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..Event+skipUniqueEventsStep"},".skipUniqueEventsStep()")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..Event+getSqlUniqueId"},".getSqlUniqueId()")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..Event+setEventName"},".setEventName(eventName)")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..Event+publish"},".publish()")))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..EventFactory"},"~EventFactory"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#new_module_dataform-ga4-sessions..EventFactory_new"},"new EventFactory(sourceConfig)")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..EventFactory+_timestampEventParamName"},"._timestampEventParamName")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..EventFactory+createEvent"},".createEvent(eventConfig)")," \u21d2 ",(0,r.kt)("code",null,"Event")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..EventFactory+createEvents"},".createEvents(eventConfig)")," \u21d2 ",(0,r.kt)("code",null,"Array.","<","Event",">")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..EventFactory+createEcommerceEvents"},".createEcommerceEvents()")," \u21d2 ",(0,r.kt)("code",null,"Array.","<","Event",">")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..EventFactory+createFormEvents"},".createFormEvents()")," \u21d2 ",(0,r.kt)("code",null,"Array.","<","Event",">")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..EventFactory+createAllRecommendedEvents"},".createAllRecommendedEvents()")," \u21d2 ",(0,r.kt)("code",null,"Array.","<","Event",">")))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..Session"},"~Session")," \u21d0 ",(0,r.kt)("code",null,"DataformAction"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#new_module_dataform-ga4-sessions..Session_new"},"new Session(sourceConfig, targetConfig)")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..Session+_uniqueKey"},"._uniqueKey")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..Session+_sourceMediumRules"},"._sourceMediumRules")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..Session+_postProcessing"},"._postProcessing")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..Session+_processingSteps"},"._processingSteps")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..Session+_lastNonDirectLookBackWindow"},"._lastNonDirectLookBackWindow")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..Session+_assertions"},"._assertions")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..Session+applyPreset"},".applyPreset(presetName)")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..Session+getSqlUniqueId"},".getSqlUniqueId()")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..Session+skipLastNonDirectStep"},".skipLastNonDirectStep()")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..Session+skipChannelStep"},".skipChannelStep()")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..Session+skipSourceMediumStep"},".skipSourceMediumStep()")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..Session+publish"},".publish()")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..Session+publishAssertions"},".publishAssertions()"))))))),(0,r.kt)("a",{name:"module_dataform-ga4-sessions..DataformAction"}),(0,r.kt)("h3",{id:"dataform-ga4-sessionsdataformaction"},"dataform-ga4-sessions~DataformAction"),(0,r.kt)("p",null,"Creates Dataform Action to build GA4 Event tables based on BigQuery exported data."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Kind"),": inner class of ",(0,r.kt)("a",{parentName:"p",href:"#module_dataform-ga4-sessions"},(0,r.kt)("code",null,"dataform-ga4-sessions")),(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("strong",{parentName:"p"},"Access"),": package  "),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..DataformAction"},"~DataformAction"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#new_module_dataform-ga4-sessions..DataformAction_new"},"new DataformAction(sourceConfig, targetConfig)")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..DataformAction+_source"},"._source")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..DataformAction+_target"},"._target")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..DataformAction+_timezone"},"._timezone")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..DataformAction+_tags"},"._tags")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..DataformAction+_assertions"},"._assertions")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..DataformAction+_partitionBy"},"._partitionBy")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..DataformAction+_uniqueKey"},"._uniqueKey")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..DataformAction+_clusterBy"},"._clusterBy")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..DataformAction+_updatePartitionFilter"},"._updatePartitionFilter")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..DataformAction+_additionalOptions"},"._additionalOptions")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..DataformAction+_partitionExpirationDays"},"._partitionExpirationDays")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..DataformAction+_requirePartitionFilter"},"._requirePartitionFilter")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..DataformAction+_columns"},"._columns")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..DataformAction+_eventParams"},"._eventParams")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..DataformAction+_userProperties"},"._userProperties")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..DataformAction+_queryParameters"},"._queryParameters")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..DataformAction+addColumns"},".addColumns(columns)")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..DataformAction+addEventParams"},".addEventParams(eventParams)")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..DataformAction+addUserProperties"},".addUserProperties(userProperties)")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..DataformAction+addQueryParameters"},".addQueryParameters(queryParameters)")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..DataformAction+getSqlUniqueId"},".getSqlUniqueId()")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..DataformAction+publish"},".publish()")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..DataformAction+publishAssertions"},".publishAssertions()"))))),(0,r.kt)("a",{name:"new_module_dataform-ga4-sessions..DataformAction_new"}),(0,r.kt)("h4",{id:"new-dataformactionsourceconfig-targetconfig"},"new DataformAction(sourceConfig, targetConfig)"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Param"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"sourceConfig"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"Object")),(0,r.kt)("td",{parentName:"tr",align:null},"GA4 BigQuery Source configuration")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"sourceConfig.database"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"string")),(0,r.kt)("td",{parentName:"tr",align:null},"The GA4 export database name. For example ",(0,r.kt)("inlineCode",{parentName:"td"},"<YOUR-GCP-PROJECT-ID>"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"sourceConfig.dataset"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"string")),(0,r.kt)("td",{parentName:"tr",align:null},"The GA4 export database name. For example ",(0,r.kt)("inlineCode",{parentName:"td"},"<YOUR-GCP-PROJECT-ID>"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"sourceConfig.incrementalTableName"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"string")),(0,r.kt)("td",{parentName:"tr",align:null},"Source incremental table name. For example ",(0,r.kt)("inlineCode",{parentName:"td"},"events_20240101"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"sourceConfig.nonIncrementalTableName"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"string")),(0,r.kt)("td",{parentName:"tr",align:null},"Source non-incremental table name. For example ",(0,r.kt)("inlineCode",{parentName:"td"},"events_*"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"sourceConfig.incrementalTableEventStepWhere"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"string")),(0,r.kt)("td",{parentName:"tr",align:null},"This property set where condition for the incremental queries. The important note this condition is added to the first step, not the final step. So if you filter for example events with source / medium values you could miss this data in the final result. Default is false")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"sourceConfig.nonIncrementalTableEventStepWhere"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"string")),(0,r.kt)("td",{parentName:"tr",align:null},"This property set where condition for the non-incremental queries. The important note this condition is added to the first step, not the final step. So if you filter for example events with source / medium values you could miss this data in the final result. Default is false")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"targetConfig"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"Object")),(0,r.kt)("td",{parentName:"tr",align:null},"Optional. Target configuration")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"targetConfig.schema"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"string")),(0,r.kt)("td",{parentName:"tr",align:null},"Optional. Target schema name")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"targetConfig.tableName"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"string")),(0,r.kt)("td",{parentName:"tr",align:null},"Optional. Target table name")))),(0,r.kt)("a",{name:"module_dataform-ga4-sessions..DataformAction+_source"}),(0,r.kt)("h4",{id:"dataformaction_source"},"dataformAction.","_","source"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Kind"),": instance property of ",(0,r.kt)("a",{parentName:"p",href:"#module_dataform-ga4-sessions..DataformAction"},(0,r.kt)("code",null,"DataformAction")),(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("strong",{parentName:"p"},"Properties")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"source"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"Object")),(0,r.kt)("td",{parentName:"tr",align:null},"GA4 BigQuery Source configuration")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"source.database"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"string")),(0,r.kt)("td",{parentName:"tr",align:null},"The GA4 export database name. For example ",(0,r.kt)("inlineCode",{parentName:"td"},"<YOUR-GCP-PROJECT-ID>"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"source.dataset"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"string")),(0,r.kt)("td",{parentName:"tr",align:null},"The GA4 export database name. For example ",(0,r.kt)("inlineCode",{parentName:"td"},"<YOUR-GCP-PROJECT-ID>"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"source.incrementalTableName"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"string")),(0,r.kt)("td",{parentName:"tr",align:null},"Source incremental table name. For example ",(0,r.kt)("inlineCode",{parentName:"td"},"events_20240101"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"source.nonIncrementalTableName"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"string")),(0,r.kt)("td",{parentName:"tr",align:null},"Source non-incremental table name. For example ",(0,r.kt)("inlineCode",{parentName:"td"},"events_*"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"source.incrementalTableEventStepWhere"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"string")),(0,r.kt)("td",{parentName:"tr",align:null},"This property set where condition for the incremental queries. The important note this condition is added to the first step, not the final step. So if you filter for example events with source / medium values you could miss this data in the final result. Default is false")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"source.nonIncrementalTableEventStepWhere"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"string")),(0,r.kt)("td",{parentName:"tr",align:null},"This property set where condition for the non-incremental queries. The important note this condition is added to the first step, not the final step. So if you filter for example events with source / medium values you could miss this data in the final result. Default is false")))),(0,r.kt)("a",{name:"module_dataform-ga4-sessions..DataformAction+_target"}),(0,r.kt)("h4",{id:"dataformaction_target"},"dataformAction.","_","target"),(0,r.kt)("p",null,"Use getter / setter methods to set values for the following properties."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Kind"),": instance property of ",(0,r.kt)("a",{parentName:"p",href:"#module_dataform-ga4-sessions..DataformAction"},(0,r.kt)("code",null,"DataformAction")),(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("strong",{parentName:"p"},"Properties")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"target"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"Object")),(0,r.kt)("td",{parentName:"tr",align:null},"Destination table config.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"target.schema"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"string")),(0,r.kt)("td",{parentName:"tr",align:null},"The target schema. Destination dataset name. Default is dataform_staging")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"target.tableName"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"string")),(0,r.kt)("td",{parentName:"tr",align:null},"The target table name. Destination table name.")))),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Example"),"  "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'session.target = {schema: "dataform_testing", tableName: "test_sessions"}}\n')),(0,r.kt)("a",{name:"module_dataform-ga4-sessions..DataformAction+_timezone"}),(0,r.kt)("h4",{id:"dataformaction_timezone"},"dataformAction.","_","timezone"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Kind"),": instance property of ",(0,r.kt)("a",{parentName:"p",href:"#module_dataform-ga4-sessions..DataformAction"},(0,r.kt)("code",null,"DataformAction")),(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("strong",{parentName:"p"},"Properties")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"timezone"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"string")),(0,r.kt)("td",{parentName:"tr",align:null},"The timezone. Default is ",(0,r.kt)("inlineCode",{parentName:"td"},"Europe/London"))))),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Example"),"  "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'session.timezone = "Europe/Berlin"\n')),(0,r.kt)("a",{name:"module_dataform-ga4-sessions..DataformAction+_tags"}),(0,r.kt)("h4",{id:"dataformaction_tags"},"dataformAction.","_","tags"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Kind"),": instance property of ",(0,r.kt)("a",{parentName:"p",href:"#module_dataform-ga4-sessions..DataformAction"},(0,r.kt)("code",null,"DataformAction")),(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("strong",{parentName:"p"},"Properties")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"tags"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"Array.","<","string",">")),(0,r.kt)("td",{parentName:"tr",align:null},"Dataform ",(0,r.kt)("a",{parentName:"td",href:"https://cloud.google.com/dataform/docs/tags"},"execution tags")," needed to run a chose a set of actions to run. By default ",(0,r.kt)("inlineCode",{parentName:"td"},"[source.dataset]")," tag is added.")))),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Example"),"  "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'session.tags = ["daily","hourly"]\n')),(0,r.kt)("a",{name:"module_dataform-ga4-sessions..DataformAction+_assertions"}),(0,r.kt)("h4",{id:"dataformaction_assertions"},"dataformAction.","_","assertions"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Kind"),": instance property of ",(0,r.kt)("a",{parentName:"p",href:"#module_dataform-ga4-sessions..DataformAction"},(0,r.kt)("code",null,"DataformAction")),(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("strong",{parentName:"p"},"Properties")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"assertions"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"Array.","<","{name: String, config: {description: String}, query: function(String): String}",">")),(0,r.kt)("td",{parentName:"tr",align:null},"List of default ",(0,r.kt)("a",{parentName:"td",href:"https://cloud.google.com/dataform/docs/assertions"},"Dataform assertions")," for the class, but in most cases if you need extra assertions you could define them outside the class in separate files.")))),(0,r.kt)("a",{name:"module_dataform-ga4-sessions..DataformAction+_partitionBy"}),(0,r.kt)("h4",{id:"dataformaction_partitionby"},"dataformAction.","_","partitionBy"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Kind"),": instance property of ",(0,r.kt)("a",{parentName:"p",href:"#module_dataform-ga4-sessions..DataformAction"},(0,r.kt)("code",null,"DataformAction")),(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("strong",{parentName:"p"},"Properties")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"partitionBy"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"string")),(0,r.kt)("td",{parentName:"tr",align:null},"The ","[partition by]",")(",(0,r.kt)("a",{parentName:"td",href:"https://cloud.google.com/dataform/docs/partitions-clusters#create_a_table_partition"},"https://cloud.google.com/dataform/docs/partitions-clusters#create_a_table_partition"),"). Dataform use this keys to generate partitioned tables. By default partitionBy is set to ",(0,r.kt)("inlineCode",{parentName:"td"},"date"),". If you want to use another partitionBy value you need to set it manually.")))),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Example"),"  "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'session._partitionBy = "DATE(timestamp)"\n')),(0,r.kt)("a",{name:"module_dataform-ga4-sessions..DataformAction+_uniqueKey"}),(0,r.kt)("h4",{id:"dataformaction_uniquekey"},"dataformAction.","_","uniqueKey"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Kind"),": instance property of ",(0,r.kt)("a",{parentName:"p",href:"#module_dataform-ga4-sessions..DataformAction"},(0,r.kt)("code",null,"DataformAction")),(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("strong",{parentName:"p"},"Properties")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"uniqueKey"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"string")),(0,r.kt)("td",{parentName:"tr",align:null},"The ",(0,r.kt)("a",{parentName:"td",href:"https://cloud.google.com/dataform/docs/incremental-tables#merge_rows_in_an_incremental_table"},"unique key")," for incremental tables. Dataform use this keys to generate merge queries.")))),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Example"),"  "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'session.uniqueKey = ["session_id","date"]\n')),(0,r.kt)("a",{name:"module_dataform-ga4-sessions..DataformAction+_clusterBy"}),(0,r.kt)("h4",{id:"dataformaction_clusterby"},"dataformAction.","_","clusterBy"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Kind"),": instance property of ",(0,r.kt)("a",{parentName:"p",href:"#module_dataform-ga4-sessions..DataformAction"},(0,r.kt)("code",null,"DataformAction")),(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("strong",{parentName:"p"},"Properties")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"clusterBy"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"Array.","<","string",">")),(0,r.kt)("td",{parentName:"tr",align:null},"The ",(0,r.kt)("a",{parentName:"td",href:"https://cloud.google.com/dataform/docs/partitions-clusters#create_a_table_cluster"},"cluster by"),". Dataform use this keys to generate clustered tables. By default clusterBy is not set. If you want to use clusterBy you need to set it manually.")))),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Example"),"  "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'session.clusterBy = ["name", "revenue"]\n')),(0,r.kt)("a",{name:"module_dataform-ga4-sessions..DataformAction+_updatePartitionFilter"}),(0,r.kt)("h4",{id:"dataformaction_updatepartitionfilter"},"dataformAction.","_","updatePartitionFilter"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Kind"),": instance property of ",(0,r.kt)("a",{parentName:"p",href:"#module_dataform-ga4-sessions..DataformAction"},(0,r.kt)("code",null,"DataformAction")),(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("strong",{parentName:"p"},"Properties")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"updatePartitionFilter"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"string")),(0,r.kt)("td",{parentName:"tr",align:null},"The ",(0,r.kt)("a",{parentName:"td",href:"https://cloud.google.com/dataform/docs/incremental-tables#filter_rows_in_an_incremental_table"},"update partition filter"),". Dataform use this keys to to avoid scanning the whole table to find matching rows, set updatePartitionFilter to only consider a subset of records. By default updatePartitionFilter is not set. If you want to use updatePartitionFilter you need to set it manually.")))),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Example"),"  "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'session.updatePartitionFilter = "timestamp >= timestamp_sub(current_timestamp(), interval 24 hour)"\n')),(0,r.kt)("a",{name:"module_dataform-ga4-sessions..DataformAction+_additionalOptions"}),(0,r.kt)("h4",{id:"dataformaction_additionaloptions"},"dataformAction.","_","additionalOptions"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Kind"),": instance property of ",(0,r.kt)("a",{parentName:"p",href:"#module_dataform-ga4-sessions..DataformAction"},(0,r.kt)("code",null,"DataformAction")),(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("strong",{parentName:"p"},"Properties")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"additionalOptions"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"Object")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"https://cloud.google.com/dataform/docs/reference/dataform-core-reference#bigquery"},"IBigQueryOptions additionalOptions"),". Key-value pairs for the table, view, and materialized view options.")))),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Example"),"  "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'session.additionalOptions = {numeric_option: "5", string_option: \'"string-value"\'}\n')),(0,r.kt)("a",{name:"module_dataform-ga4-sessions..DataformAction+_partitionExpirationDays"}),(0,r.kt)("h4",{id:"dataformaction_partitionexpirationdays"},"dataformAction.","_","partitionExpirationDays"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Kind"),": instance property of ",(0,r.kt)("a",{parentName:"p",href:"#module_dataform-ga4-sessions..DataformAction"},(0,r.kt)("code",null,"DataformAction")),(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("strong",{parentName:"p"},"Properties")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"partitionExpirationDays"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"number")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"https://cloud.google.com/dataform/docs/reference/dataform-core-reference#bigquery"},"IBigQueryOptions partitionExpirationDays"),". The number of days for which BigQuery stores data in each partition. The setting applies to all partitions in a table, but is calculated independently for each partition based on the partition time.")))),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Example"),"  "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"session.partitionExpirationDays = 90\n")),(0,r.kt)("a",{name:"module_dataform-ga4-sessions..DataformAction+_requirePartitionFilter"}),(0,r.kt)("h4",{id:"dataformaction_requirepartitionfilter"},"dataformAction.","_","requirePartitionFilter"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Kind"),": instance property of ",(0,r.kt)("a",{parentName:"p",href:"#module_dataform-ga4-sessions..DataformAction"},(0,r.kt)("code",null,"DataformAction")),(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("strong",{parentName:"p"},"Properties")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"requirePartitionFilter"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"boolean")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"https://cloud.google.com/dataform/docs/reference/dataform-core-reference#bigquery"},"IBigQueryOptions partitionExpirationDays"),". Declares whether the partitioned table requires a WHERE clause predicate filter that filters the partitioning column.")))),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Example"),"  "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"session.requirePartitionFilter = true\n")),(0,r.kt)("a",{name:"module_dataform-ga4-sessions..DataformAction+_columns"}),(0,r.kt)("h4",{id:"dataformaction_columns"},"dataformAction.","_","columns"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Kind"),": instance property of ",(0,r.kt)("a",{parentName:"p",href:"#module_dataform-ga4-sessions..DataformAction"},(0,r.kt)("code",null,"DataformAction")),(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("strong",{parentName:"p"},"Properties")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"columns"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"Array.","<","Object",">")),(0,r.kt)("td",{parentName:"tr",align:null},"List of columns from GA4 raw table to be added to the final table. You could check the list of all available columns ",(0,r.kt)("a",{parentName:"td",href:"https://support.google.com/analytics/answer/7029846?hl=en"},"here"),". By default columns are added based on the preset. Or you could add them manually using ",(0,r.kt)("inlineCode",{parentName:"td"},"addColumns")," method.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"columns[].name"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"String")),(0,r.kt)("td",{parentName:"tr",align:null},"Name of the column in GA4 raw table.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"[columns[].columnName]"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"String")),(0,r.kt)("td",{parentName:"tr",align:null},"Optional. The name of the column in the result table. If not provided the name will be the same as in GA4 raw table.")))),(0,r.kt)("a",{name:"module_dataform-ga4-sessions..DataformAction+_eventParams"}),(0,r.kt)("h4",{id:"dataformaction_eventparams"},"dataformAction.","_","eventParams"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Kind"),": instance property of ",(0,r.kt)("a",{parentName:"p",href:"#module_dataform-ga4-sessions..DataformAction"},(0,r.kt)("code",null,"DataformAction")),(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("strong",{parentName:"p"},"Properties")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"eventParams"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"Array.","<","Object",">")),(0,r.kt)("td",{parentName:"tr",align:null},"List of event params unnested from GA4 raw table event_params column. By default ",(0,r.kt)("inlineCode",{parentName:"td"},"eventParams")," are added based on the preset. You could add your custom event_params using ",(0,r.kt)("inlineCode",{parentName:"td"},"addEventParams")," method.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"eventParams[].name"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"String")),(0,r.kt)("td",{parentName:"tr",align:null},"The value of ",(0,r.kt)("inlineCode",{parentName:"td"},"key")," in the event_params record.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"[eventParams[].columnName]"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"String")),(0,r.kt)("td",{parentName:"tr",align:null},"Optional. The name of the column in the result table. If not provided the name will be the same as ",(0,r.kt)("inlineCode",{parentName:"td"},"eventParams[].name"),".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"[eventParams[].type]"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"'","string","'")," ","|"," ",(0,r.kt)("code",null,"'","int","'")," ","|"," ",(0,r.kt)("code",null,"'","double","'")," ","|"," ",(0,r.kt)("code",null,"'","float","'")," ","|"," ",(0,r.kt)("code",null,"'","coalesce","'")," ","|"," ",(0,r.kt)("code",null,"'","coalesce","_","float","'")),(0,r.kt)("td",{parentName:"tr",align:null},"Optional. The name of the value in the event_params column. By default ",(0,r.kt)("inlineCode",{parentName:"td"},"string"),".")))),(0,r.kt)("a",{name:"module_dataform-ga4-sessions..DataformAction+_userProperties"}),(0,r.kt)("h4",{id:"dataformaction_userproperties"},"dataformAction.","_","userProperties"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Kind"),": instance property of ",(0,r.kt)("a",{parentName:"p",href:"#module_dataform-ga4-sessions..DataformAction"},(0,r.kt)("code",null,"DataformAction")),(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("strong",{parentName:"p"},"Properties")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"userProperties"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"Array.","<","Object",">")),(0,r.kt)("td",{parentName:"tr",align:null},"List of user properties unnested from GA4 raw table user_properties column. By default ",(0,r.kt)("inlineCode",{parentName:"td"},"userProperties")," are not added. You could add your custom user_properties using ",(0,r.kt)("inlineCode",{parentName:"td"},"addUserProperties")," method.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"userProperties[].name"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"String")),(0,r.kt)("td",{parentName:"tr",align:null},"The value of ",(0,r.kt)("inlineCode",{parentName:"td"},"key")," in the user_properties record.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"[userProperties[].columnName]"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"String")),(0,r.kt)("td",{parentName:"tr",align:null},"Optional. The name of the column in the result table. If not provided the name will be the same as ",(0,r.kt)("inlineCode",{parentName:"td"},"userProperties[].name"),".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"[userProperties[].type]"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"'","string","'")," ","|"," ",(0,r.kt)("code",null,"'","int","'")," ","|"," ",(0,r.kt)("code",null,"'","double","'")," ","|"," ",(0,r.kt)("code",null,"'","float","'")," ","|"," ",(0,r.kt)("code",null,"'","coalesce","'")," ","|"," ",(0,r.kt)("code",null,"'","coalesce","_","float","'")),(0,r.kt)("td",{parentName:"tr",align:null},"Optional. The name of the value in the event_params column. By default ",(0,r.kt)("inlineCode",{parentName:"td"},"string"),".")))),(0,r.kt)("a",{name:"module_dataform-ga4-sessions..DataformAction+_queryParameters"}),(0,r.kt)("h4",{id:"dataformaction_queryparameters"},"dataformAction.","_","queryParameters"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Kind"),": instance property of ",(0,r.kt)("a",{parentName:"p",href:"#module_dataform-ga4-sessions..DataformAction"},(0,r.kt)("code",null,"DataformAction")),(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("strong",{parentName:"p"},"Properties")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"queryParameters"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"Array.","<","Object",">")),(0,r.kt)("td",{parentName:"tr",align:null},"List of query parameters from the unnested ",(0,r.kt)("inlineCode",{parentName:"td"},"event_params")," column with the key ",(0,r.kt)("inlineCode",{parentName:"td"},"page_location"),". You could add your custom query_parameters using ",(0,r.kt)("inlineCode",{parentName:"td"},"addQueryParameters")," method.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"queryParameters[].name"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"String")),(0,r.kt)("td",{parentName:"tr",align:null},"The query parameter name.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"[queryParameters[].columnName]"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"String")),(0,r.kt)("td",{parentName:"tr",align:null},"Optional. The name of the column in the result table. If not provided the name will be the same as ",(0,r.kt)("inlineCode",{parentName:"td"},"queryParameters[].name"),".")))),(0,r.kt)("a",{name:"module_dataform-ga4-sessions..DataformAction+addColumns"}),(0,r.kt)("h4",{id:"dataformactionaddcolumnscolumns"},"dataformAction.addColumns(columns)"),(0,r.kt)("div",{className:"admonition admonition-warning alert alert--danger"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"warning")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"If you add columns with ",(0,r.kt)("inlineCode",{parentName:"p"},"RECORD")," type, like: ",(0,r.kt)("inlineCode",{parentName:"p"},"device.*"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"geo.*")," you should specify the ",(0,r.kt)("inlineCode",{parentName:"p"},"columnName"),". Because the result column name couldn't have a dot (.) symbol in the name."))),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Kind"),": instance method of ",(0,r.kt)("a",{parentName:"p",href:"#module_dataform-ga4-sessions..DataformAction"},(0,r.kt)("code",null,"DataformAction")),"  "),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Param"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"columns"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"Array.","<","Object",">")),(0,r.kt)("td",{parentName:"tr",align:null},"List of columns from GA4 raw table to be added to the final table.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"columns[].name"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"String")),(0,r.kt)("td",{parentName:"tr",align:null},"Name of the column in GA4 raw table.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"[columns[].columnName]"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"String")),(0,r.kt)("td",{parentName:"tr",align:null},"Optional. The name of the column in the result table. If not provided the name will be the same as in GA4 raw table.")))),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Example"),"  "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'session.addColumns([\n{ name: "geo.city", columnName: "city" },\n{ name: "geo.metro", columnName: "metro" },\n{ name: "stream_id" },\n{ name: "platform" },\n])\n')),(0,r.kt)("a",{name:"module_dataform-ga4-sessions..DataformAction+addEventParams"}),(0,r.kt)("h4",{id:"dataformactionaddeventparamseventparams"},"dataformAction.addEventParams(eventParams)"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Kind"),": instance method of ",(0,r.kt)("a",{parentName:"p",href:"#module_dataform-ga4-sessions..DataformAction"},(0,r.kt)("code",null,"DataformAction")),"  "),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Param"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"eventParams"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"Array.","<","Object",">")),(0,r.kt)("td",{parentName:"tr",align:null},"List of event params unnested from GA4 raw table event_params column.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"eventParams[].name"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"String")),(0,r.kt)("td",{parentName:"tr",align:null},"The value of ",(0,r.kt)("inlineCode",{parentName:"td"},"key")," in the event_params record.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"[eventParams[].columnName]"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"String")),(0,r.kt)("td",{parentName:"tr",align:null},"Optional. The name of the column in the result table. If not provided the name will be the same as ",(0,r.kt)("inlineCode",{parentName:"td"},"eventParams[].name"),".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"[eventParams[].type]"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"'","string","'")," ","|"," ",(0,r.kt)("code",null,"'","int","'")," ","|"," ",(0,r.kt)("code",null,"'","double","'")," ","|"," ",(0,r.kt)("code",null,"'","float","'")," ","|"," ",(0,r.kt)("code",null,"'","coalesce","'")," ","|"," ",(0,r.kt)("code",null,"'","coalesce","_","float","'")),(0,r.kt)("td",{parentName:"tr",align:null},"Optional. The name of the value in the event_params column. By default ",(0,r.kt)("inlineCode",{parentName:"td"},"string"),".")))),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Example"),"  "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'session.addUserProperties([\n{ name: "ignore_referrer", type: "string" }\n])\n')),(0,r.kt)("a",{name:"module_dataform-ga4-sessions..DataformAction+addUserProperties"}),(0,r.kt)("h4",{id:"dataformactionadduserpropertiesuserproperties"},"dataformAction.addUserProperties(userProperties)"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Kind"),": instance method of ",(0,r.kt)("a",{parentName:"p",href:"#module_dataform-ga4-sessions..DataformAction"},(0,r.kt)("code",null,"DataformAction")),"  "),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Param"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"userProperties"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"Array.","<","Object",">")),(0,r.kt)("td",{parentName:"tr",align:null},"List of user properties unnested from GA4 raw table user_properties column.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"userProperties[].name"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"String")),(0,r.kt)("td",{parentName:"tr",align:null},"The value of ",(0,r.kt)("inlineCode",{parentName:"td"},"key")," in the user_properties record.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"[userProperties[].columnName]"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"String")),(0,r.kt)("td",{parentName:"tr",align:null},"Optional. The name of the column in the result table. If not provided the name will be the same as ",(0,r.kt)("inlineCode",{parentName:"td"},"userProperties[].name"),".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"[userProperties[].type]"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"'","string","'")," ","|"," ",(0,r.kt)("code",null,"'","int","'")," ","|"," ",(0,r.kt)("code",null,"'","double","'")," ","|"," ",(0,r.kt)("code",null,"'","float","'")," ","|"," ",(0,r.kt)("code",null,"'","coalesce","'")," ","|"," ",(0,r.kt)("code",null,"'","coalesce","_","float","'")),(0,r.kt)("td",{parentName:"tr",align:null},"Optional. The name of the value in the event_params column. By default ",(0,r.kt)("inlineCode",{parentName:"td"},"string"),".")))),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Example"),"  "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'session.addUserProperties([\n{ name: "user_status", type: "string" }\n])\n')),(0,r.kt)("a",{name:"module_dataform-ga4-sessions..DataformAction+addQueryParameters"}),(0,r.kt)("h4",{id:"dataformactionaddqueryparametersqueryparameters"},"dataformAction.addQueryParameters(queryParameters)"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Kind"),": instance method of ",(0,r.kt)("a",{parentName:"p",href:"#module_dataform-ga4-sessions..DataformAction"},(0,r.kt)("code",null,"DataformAction")),"  "),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Param"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"queryParameters"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"Array.","<","Object",">")),(0,r.kt)("td",{parentName:"tr",align:null},"List of query parameters from the unnested ",(0,r.kt)("inlineCode",{parentName:"td"},"event_params")," column with the key ",(0,r.kt)("inlineCode",{parentName:"td"},"page_location"),".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"queryParameters[].name"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"String")),(0,r.kt)("td",{parentName:"tr",align:null},"The query parameter name.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"[queryParameters[].columnName]"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"String")),(0,r.kt)("td",{parentName:"tr",align:null},"Optional. The name of the column in the result table. If not provided the name will be the same as ",(0,r.kt)("inlineCode",{parentName:"td"},"queryParameters[].name"),".")))),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Example"),"  "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'session.addUserProperties([\n{ name: "fbclid" },\n{ name: "ttclid" },\n{ name: "gclid", columnName: "gclid_url" },\n])\n')),(0,r.kt)("a",{name:"module_dataform-ga4-sessions..DataformAction+getSqlUniqueId"}),(0,r.kt)("h4",{id:"dataformactiongetsqluniqueid"},"dataformAction.getSqlUniqueId()"),(0,r.kt)("p",null,"Helper method to generate SQL code to get unique id for each row in a final table, used inside publish method. Should be overwritten in the child class."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Kind"),": instance method of ",(0,r.kt)("a",{parentName:"p",href:"#module_dataform-ga4-sessions..DataformAction"},(0,r.kt)("code",null,"DataformAction")),"  "),(0,r.kt)("a",{name:"module_dataform-ga4-sessions..DataformAction+publish"}),(0,r.kt)("h4",{id:"dataformactionpublish"},"dataformAction.publish()"),(0,r.kt)("p",null,"Main method to publish Dataform Action. This method generates SQL and then uses Dataform core ",(0,r.kt)("a",{parentName:"p",href:"https://cloud.google.com/dataform/docs/reference/dataform-core-reference#publish"},"publish")," method to generate incremental and non-incremental session table. This method should be overwritten in the child class."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Kind"),": instance method of ",(0,r.kt)("a",{parentName:"p",href:"#module_dataform-ga4-sessions..DataformAction"},(0,r.kt)("code",null,"DataformAction")),"  "),(0,r.kt)("a",{name:"module_dataform-ga4-sessions..DataformAction+publishAssertions"}),(0,r.kt)("h4",{id:"dataformactionpublishassertions"},"dataformAction.publishAssertions()"),(0,r.kt)("p",null,"The method to publish default ",(0,r.kt)("a",{parentName:"p",href:"https://cloud.google.com/dataform/docs/assertions"},"Dataform assertions"),". This method should be overwritten in the child class."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Kind"),": instance method of ",(0,r.kt)("a",{parentName:"p",href:"#module_dataform-ga4-sessions..DataformAction"},(0,r.kt)("code",null,"DataformAction")),"  "),(0,r.kt)("a",{name:"module_dataform-ga4-sessions..Event"}),(0,r.kt)("h3",{id:"dataform-ga4-sessionsevent--dataformaction"},"dataform-ga4-sessions~Event \u21d0 ",(0,r.kt)("code",null,"DataformAction")),(0,r.kt)("p",null,"Creates Dataform Action to build GA4 event tables based on BigQuery exported data, for example table for ",(0,r.kt)("inlineCode",{parentName:"p"},"purchase")," events. But instead of using this class directly, it is recommended to use ",(0,r.kt)("inlineCode",{parentName:"p"},"EventFactory")," to create events. The factory could simplify the creation of auto or recommended events. But after the creation of the event, you could use any of ",(0,r.kt)("inlineCode",{parentName:"p"},"DataformAction")," methods and properties."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Kind"),": inner class of ",(0,r.kt)("a",{parentName:"p",href:"#module_dataform-ga4-sessions"},(0,r.kt)("code",null,"dataform-ga4-sessions")),(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("strong",{parentName:"p"},"Extends"),": ",(0,r.kt)("code",null,"DataformAction"),"  "),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..Event"},"~Event")," \u21d0 ",(0,r.kt)("code",null,"DataformAction"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#new_module_dataform-ga4-sessions..Event_new"},"new Event(sourceConfig, targetConfig)")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..Event+_uniqueKey"},"._uniqueKey")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..Event+_timestampEventParamName"},"._timestampEventParamName")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..Event+skipUniqueEventsStep"},".skipUniqueEventsStep()")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..Event+getSqlUniqueId"},".getSqlUniqueId()")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..Event+setEventName"},".setEventName(eventName)")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..Event+publish"},".publish()"))))),(0,r.kt)("a",{name:"new_module_dataform-ga4-sessions..Event_new"}),(0,r.kt)("h4",{id:"new-eventsourceconfig-targetconfig"},"new Event(sourceConfig, targetConfig)"),(0,r.kt)("p",null,"Constructor for the Event class inherited from DataformAction class. Before creating the object of this class you need to declare GA4 source tables using ",(0,r.kt)("inlineCode",{parentName:"p"},"declareSources")," method."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Param"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"sourceConfig"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"Object")),(0,r.kt)("td",{parentName:"tr",align:null},"GA4 BigQuery Source configuration")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"sourceConfig.database"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"string")),(0,r.kt)("td",{parentName:"tr",align:null},"The GA4 export database name. For example ",(0,r.kt)("inlineCode",{parentName:"td"},"<YOUR-GCP-PROJECT-ID>"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"sourceConfig.dataset"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"string")),(0,r.kt)("td",{parentName:"tr",align:null},"The GA4 export database name. For example ",(0,r.kt)("inlineCode",{parentName:"td"},"<YOUR-GCP-PROJECT-ID>"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"sourceConfig.incrementalTableName"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"string")),(0,r.kt)("td",{parentName:"tr",align:null},"Source incremental table name. For example ",(0,r.kt)("inlineCode",{parentName:"td"},"events_20240101"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"sourceConfig.nonIncrementalTableName"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"string")),(0,r.kt)("td",{parentName:"tr",align:null},"Source non-incremental table name. For example ",(0,r.kt)("inlineCode",{parentName:"td"},"events_*"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"sourceConfig.incrementalTableEventStepWhere"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"string")),(0,r.kt)("td",{parentName:"tr",align:null},"This property set where condition for the incremental queries. The important note this condition is added to the first step, not the final step. So if you filter for example events with source / medium values you could miss this data in the final result. Default is false")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"sourceConfig.nonIncrementalTableEventStepWhere"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"string")),(0,r.kt)("td",{parentName:"tr",align:null},"This property set where condition for the non-incremental queries. The important note this condition is added to the first step, not the final step. So if you filter for example events with source / medium values you could miss this data in the final result. Default is false")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"targetConfig"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"Object")),(0,r.kt)("td",{parentName:"tr",align:null},"Optional. Target configuration")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"targetConfig.schema"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"string")),(0,r.kt)("td",{parentName:"tr",align:null},"Optional. Target schema name. Default is ",(0,r.kt)("inlineCode",{parentName:"td"},"dataform_staging"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"targetConfig.tableName"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"string")),(0,r.kt)("td",{parentName:"tr",align:null},"Optional. Target table name.")))),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Example"),"  "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'// Define your config\nconst eventConfig = {\ndataset: "analytics_XXXXXX",\nincrementalTableName: "events_XXXXXX",\n};\n\n// Declare GA4 source tables\nga4.declareSources(eventConfig);\n\n// Create event\nlet purchase = new ga4.Event(eventConfig);\n\n// Set destination table name and add where conditions for the event\npurchase.setEventName("purchase");\n')),(0,r.kt)("a",{name:"module_dataform-ga4-sessions..Event+_uniqueKey"}),(0,r.kt)("h4",{id:"event_uniquekey"},"event.","_","uniqueKey"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Kind"),": instance property of ",(0,r.kt)("a",{parentName:"p",href:"#module_dataform-ga4-sessions..Event"},(0,r.kt)("code",null,"Event")),(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("strong",{parentName:"p"},"Properties")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"uniqueKey"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"string")),(0,r.kt)("td",{parentName:"tr",align:null},"The ",(0,r.kt)("a",{parentName:"td",href:"https://cloud.google.com/dataform/docs/incremental-tables#merge_rows_in_an_incremental_table"},"unique key")," for incremental tables. Dataform use this keys to generate merge queries. Default value for Event is ",(0,r.kt)("inlineCode",{parentName:"td"},'["date", "event_id"]'))))),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Example"),"  "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'event.uniqueKey = ["event_id","date"]\n')),(0,r.kt)("a",{name:"module_dataform-ga4-sessions..Event+_timestampEventParamName"}),(0,r.kt)("h4",{id:"event_timestampeventparamname"},"event.","_","timestampEventParamName"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Kind"),": instance property of ",(0,r.kt)("a",{parentName:"p",href:"#module_dataform-ga4-sessions..Event"},(0,r.kt)("code",null,"Event")),(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("strong",{parentName:"p"},"Properties")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"timestampEventParamName"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"string")),(0,r.kt)("td",{parentName:"tr",align:null},"This property will be used to generate unique event_id. The value will be from unnested ",(0,r.kt)("inlineCode",{parentName:"td"},"event_params")," column with the key equals the value of this property. But at first you should add this event parameter in your GTM setup. ",(0,r.kt)("inlineCode",{parentName:"td"},'js event.timestampEventParamName = "gtm_event_timestamp" '))))),(0,r.kt)("a",{name:"module_dataform-ga4-sessions..Event+skipUniqueEventsStep"}),(0,r.kt)("h4",{id:"eventskipuniqueeventsstep"},"event.skipUniqueEventsStep()"),(0,r.kt)("p",null,"Helper method to skip unique events step. By default ",(0,r.kt)("inlineCode",{parentName:"p"},"where")," condition is added to filter all events with ",(0,r.kt)("inlineCode",{parentName:"p"},"event_id")," equals to null. Also ",(0,r.kt)("inlineCode",{parentName:"p"},"QUALIFY")," statement is added to get only one event per ",(0,r.kt)("inlineCode",{parentName:"p"},"event_id"),". But if you want to skip this step you could use this method."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Kind"),": instance method of ",(0,r.kt)("a",{parentName:"p",href:"#module_dataform-ga4-sessions..Event"},(0,r.kt)("code",null,"Event")),(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("strong",{parentName:"p"},"Example"),"  "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"event.skipUniqueEventsStep();\n")),(0,r.kt)("a",{name:"module_dataform-ga4-sessions..Event+getSqlUniqueId"}),(0,r.kt)("h4",{id:"eventgetsqluniqueid"},"event.getSqlUniqueId()"),(0,r.kt)("p",null,"Helper method to generate SQL code to get unique id for each row in a final table, used inside publish method. By default it use getSqlEventId from dataform-ga4-helpers package"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Kind"),": instance method of ",(0,r.kt)("a",{parentName:"p",href:"#module_dataform-ga4-sessions..Event"},(0,r.kt)("code",null,"Event")),"  "),(0,r.kt)("a",{name:"module_dataform-ga4-sessions..Event+setEventName"}),(0,r.kt)("h4",{id:"eventseteventnameeventname"},"event.setEventName(eventName)"),(0,r.kt)("p",null,"This helper method will use event name to define target table and  add where conditions for the final query. It's recommended to use ",(0,r.kt)("inlineCode",{parentName:"p"},"EventFactory")," to create events. But if you want to create event manually you could use this method."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Kind"),": instance method of ",(0,r.kt)("a",{parentName:"p",href:"#module_dataform-ga4-sessions..Event"},(0,r.kt)("code",null,"Event")),"  "),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Param"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"eventName"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"string")),(0,r.kt)("td",{parentName:"tr",align:null},"The event name. For example ",(0,r.kt)("inlineCode",{parentName:"td"},"purchase"))))),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Example"),"  "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'event.setEventName("purchase")\n')),(0,r.kt)("a",{name:"module_dataform-ga4-sessions..Event+publish"}),(0,r.kt)("h4",{id:"eventpublish"},"event.publish()"),(0,r.kt)("p",null,"Main method to publish Dataform Action. This method generates SQL and then uses Dataform core ",(0,r.kt)("a",{parentName:"p",href:"https://cloud.google.com/dataform/docs/reference/dataform-core-reference#publish"},"publish")," method to generate incremental and non-incremental session table. This method should be overwritten in the child class."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Kind"),": instance method of ",(0,r.kt)("a",{parentName:"p",href:"#module_dataform-ga4-sessions..Event"},(0,r.kt)("code",null,"Event")),(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("strong",{parentName:"p"},"Example"),"  "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"purchase.publish()\n")),(0,r.kt)("a",{name:"module_dataform-ga4-sessions..EventFactory"}),(0,r.kt)("h3",{id:"dataform-ga4-sessionseventfactory"},"dataform-ga4-sessions~EventFactory"),(0,r.kt)("p",null,"Helper class to create GA4 events. It's recommended to use this class to create events. But if you want to create event manually you could use ",(0,r.kt)("inlineCode",{parentName:"p"},"Event")," class."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Kind"),": inner class of ",(0,r.kt)("a",{parentName:"p",href:"#module_dataform-ga4-sessions"},(0,r.kt)("code",null,"dataform-ga4-sessions")),"  "),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..EventFactory"},"~EventFactory"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#new_module_dataform-ga4-sessions..EventFactory_new"},"new EventFactory(sourceConfig)")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..EventFactory+_timestampEventParamName"},"._timestampEventParamName")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..EventFactory+createEvent"},".createEvent(eventConfig)")," \u21d2 ",(0,r.kt)("code",null,"Event")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..EventFactory+createEvents"},".createEvents(eventConfig)")," \u21d2 ",(0,r.kt)("code",null,"Array.","<","Event",">")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..EventFactory+createEcommerceEvents"},".createEcommerceEvents()")," \u21d2 ",(0,r.kt)("code",null,"Array.","<","Event",">")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..EventFactory+createFormEvents"},".createFormEvents()")," \u21d2 ",(0,r.kt)("code",null,"Array.","<","Event",">")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..EventFactory+createAllRecommendedEvents"},".createAllRecommendedEvents()")," \u21d2 ",(0,r.kt)("code",null,"Array.","<","Event",">"))))),(0,r.kt)("a",{name:"new_module_dataform-ga4-sessions..EventFactory_new"}),(0,r.kt)("h4",{id:"new-eventfactorysourceconfig"},"new EventFactory(sourceConfig)"),(0,r.kt)("p",null,"Create any recommended or auto event using EventFactory method like ",(0,r.kt)("inlineCode",{parentName:"p"},"createEventName"),"."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Param"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"sourceConfig"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"Object")),(0,r.kt)("td",{parentName:"tr",align:null},"GA4 BigQuery Source configuration")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"sourceConfig.database"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"string")),(0,r.kt)("td",{parentName:"tr",align:null},"The GA4 export database name. For example ",(0,r.kt)("inlineCode",{parentName:"td"},"<YOUR-GCP-PROJECT-ID>"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"sourceConfig.dataset"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"string")),(0,r.kt)("td",{parentName:"tr",align:null},"The GA4 export database name. For example ",(0,r.kt)("inlineCode",{parentName:"td"},"<YOUR-GCP-PROJECT-ID>"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"sourceConfig.incrementalTableName"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"string")),(0,r.kt)("td",{parentName:"tr",align:null},"Source incremental table name. For example ",(0,r.kt)("inlineCode",{parentName:"td"},"events_20240101"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"sourceConfig.nonIncrementalTableName"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"string")),(0,r.kt)("td",{parentName:"tr",align:null},"Source non-incremental table name. For example ",(0,r.kt)("inlineCode",{parentName:"td"},"events_*"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"sourceConfig.incrementalTableEventStepWhere"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"string")),(0,r.kt)("td",{parentName:"tr",align:null},"This property set where condition for the incremental queries. The important note this condition is added to the first step, not the final step. So if you filter for example events with source / medium values you could miss this data in the final result. Default is false")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"sourceConfig.nonIncrementalTableEventStepWhere"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"string")),(0,r.kt)("td",{parentName:"tr",align:null},"This property set where condition for the non-incremental queries. The important note this condition is added to the first step, not the final step. So if you filter for example events with source / medium values you could miss this data in the final result. Default is false")))),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Example"),"  "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'// Define your config\nconst eventConfig = {\ndataset: "analytics_XXXXXX",\nincrementalTableName: "events_XXXXXX",\n};\n\n// Define EventFactory\nconst ef = new ga4.EventFactory(eventConfig);\n\n// Create purchase event:\nconst purchase = ef.createPurchase();\n\n//Publish event\npurchase.publish()\n')),(0,r.kt)("a",{name:"module_dataform-ga4-sessions..EventFactory+_timestampEventParamName"}),(0,r.kt)("h4",{id:"eventfactory_timestampeventparamname"},"eventFactory.","_","timestampEventParamName"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Kind"),": instance property of ",(0,r.kt)("a",{parentName:"p",href:"#module_dataform-ga4-sessions..EventFactory"},(0,r.kt)("code",null,"EventFactory")),(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("strong",{parentName:"p"},"Properties")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"timestampEventParamName"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"string")),(0,r.kt)("td",{parentName:"tr",align:null},"This property will be used to generate unique event_id. The value will be from unnested ",(0,r.kt)("inlineCode",{parentName:"td"},"event_params")," column with the key equals the value of this property. But at first you should add this event parameter in your GTM setup. ",(0,r.kt)("inlineCode",{parentName:"td"},'js // Define EventFactory const ef = new ga4.EventFactory(eventConfig); // Set timestampEventParamName ef.timestampEventParamName = "gtm_event_timestamp" '))))),(0,r.kt)("a",{name:"module_dataform-ga4-sessions..EventFactory+createEvent"}),(0,r.kt)("h4",{id:"eventfactorycreateeventeventconfig--event"},"eventFactory.createEvent(eventConfig) \u21d2 ",(0,r.kt)("code",null,"Event")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Kind"),": instance method of ",(0,r.kt)("a",{parentName:"p",href:"#module_dataform-ga4-sessions..EventFactory"},(0,r.kt)("code",null,"EventFactory")),(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("strong",{parentName:"p"},"Returns"),": ",(0,r.kt)("code",null,"Event")," - Event object  "),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Param"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"eventConfig"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"Object")),(0,r.kt)("td",{parentName:"tr",align:null},"Event configuration")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"eventConfig.eventName"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"String")),(0,r.kt)("td",{parentName:"tr",align:null},"Event name. For example ",(0,r.kt)("inlineCode",{parentName:"td"},"purchase"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"[eventConfig.columns]"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"Object")),(0,r.kt)("td",{parentName:"tr",align:null},"List of columns from GA4 raw table to be added to the final table. You could check the list of all available columns ",(0,r.kt)("a",{parentName:"td",href:"https://support.google.com/analytics/answer/7029846?hl=en"},"here"),". By default columns are added based on the preset. Or you could add them manually using ",(0,r.kt)("inlineCode",{parentName:"td"},"addColumns")," method.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"[eventConfig.columns.name]"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"String")),(0,r.kt)("td",{parentName:"tr",align:null},"Name of the column in GA4 raw table.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"[eventConfig.columns.columnName]"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"String")),(0,r.kt)("td",{parentName:"tr",align:null},"Optional. The name of the column in the result table. If not provided the name will be the same as in GA4 raw table.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"[eventConfig.eventParams]"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"Object")),(0,r.kt)("td",{parentName:"tr",align:null},"List of event params unnested from GA4 raw table event_params column. By default ",(0,r.kt)("inlineCode",{parentName:"td"},"eventParams")," are added based on the preset. You could add your custom event_params using ",(0,r.kt)("inlineCode",{parentName:"td"},"addEventParams")," method.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"[eventConfig.eventParams.name]"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"String")),(0,r.kt)("td",{parentName:"tr",align:null},"The value of ",(0,r.kt)("inlineCode",{parentName:"td"},"key")," in the event_params record.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"[eventParams.columnName]"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"String")),(0,r.kt)("td",{parentName:"tr",align:null},"Optional. The name of the column in the result table. If not provided the name will be the same as ",(0,r.kt)("inlineCode",{parentName:"td"},"eventParams.name"),".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"[eventConfig.eventParams.type]"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"'","string","'")," ","|"," ",(0,r.kt)("code",null,"'","int","'")," ","|"," ",(0,r.kt)("code",null,"'","double","'")," ","|"," ",(0,r.kt)("code",null,"'","float","'")," ","|"," ",(0,r.kt)("code",null,"'","coalesce","'")," ","|"," ",(0,r.kt)("code",null,"'","coalesce","_","float","'")),(0,r.kt)("td",{parentName:"tr",align:null},"Optional. The name of the value in the event_params column. By default ",(0,r.kt)("inlineCode",{parentName:"td"},"string"),".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"[eventConfig.userProperties]"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"Object")),(0,r.kt)("td",{parentName:"tr",align:null},"List of user properties unnested from GA4 raw table user_properties column. By default ",(0,r.kt)("inlineCode",{parentName:"td"},"userProperties")," are not added. You could add your custom user_properties using ",(0,r.kt)("inlineCode",{parentName:"td"},"addUserProperties")," method.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"[eventConfig.userProperties.name]"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"String")),(0,r.kt)("td",{parentName:"tr",align:null},"The value of ",(0,r.kt)("inlineCode",{parentName:"td"},"key")," in the user_properties record.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"[eventConfig.userProperties.columnName]"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"String")),(0,r.kt)("td",{parentName:"tr",align:null},"Optional. The name of the column in the result table. If not provided the name will be the same as ",(0,r.kt)("inlineCode",{parentName:"td"},"userProperties.name"),".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"[eventConfig.userProperties.type]"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"'","string","'")," ","|"," ",(0,r.kt)("code",null,"'","int","'")," ","|"," ",(0,r.kt)("code",null,"'","double","'")," ","|"," ",(0,r.kt)("code",null,"'","float","'")," ","|"," ",(0,r.kt)("code",null,"'","coalesce","'")," ","|"," ",(0,r.kt)("code",null,"'","coalesce","_","float","'")),(0,r.kt)("td",{parentName:"tr",align:null},"Optional. The name of the value in the event_params column. By default ",(0,r.kt)("inlineCode",{parentName:"td"},"string"),".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"[eventConfig.queryParameters]"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"Object")),(0,r.kt)("td",{parentName:"tr",align:null},"List of query parameters from the unnested ",(0,r.kt)("inlineCode",{parentName:"td"},"event_params")," column with the key ",(0,r.kt)("inlineCode",{parentName:"td"},"page_location"),". You could add your custom query_parameters using ",(0,r.kt)("inlineCode",{parentName:"td"},"addQueryParameters")," method.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"[eventConfig.queryParameters.name]"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"String")),(0,r.kt)("td",{parentName:"tr",align:null},"The query parameter name.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"[eventConfig.queryParameters.columnName]"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"String")),(0,r.kt)("td",{parentName:"tr",align:null},"Optional. The name of the column in the result table. If not provided the name will be the same as ",(0,r.kt)("inlineCode",{parentName:"td"},"queryParameters[].name"),".")))),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Example"),"  "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'const purchase = ef.createEvent({\n eventName: "session_start",\n columns:[{name:"privacy_info.analytics_storage", columnName:"analytics_storage"}],\n eventParams:[ { name: "page_referrer", type: "string" }]\n})\n')),(0,r.kt)("a",{name:"module_dataform-ga4-sessions..EventFactory+createEvents"}),(0,r.kt)("h4",{id:"eventfactorycreateeventseventconfig--arrayevent"},"eventFactory.createEvents(eventConfig) \u21d2 ",(0,r.kt)("code",null,"Array.","<","Event",">")),(0,r.kt)("p",null,"Tne method to create multiple events using list of events configurations. This method is useful if you want to reuse the same event configurations between projects. In this case you could define event configurations in separate file and import the configs and create events using this helper method."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Kind"),": instance method of ",(0,r.kt)("a",{parentName:"p",href:"#module_dataform-ga4-sessions..EventFactory"},(0,r.kt)("code",null,"EventFactory")),(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("strong",{parentName:"p"},"Returns"),": ",(0,r.kt)("code",null,"Array.","<","Event",">")," - List of events  "),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Param"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"eventConfig"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"Array.","<","Object",">")),(0,r.kt)("td",{parentName:"tr",align:null},"List of event configurations")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"eventConfig[].eventName"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"String")),(0,r.kt)("td",{parentName:"tr",align:null},"Event name. For example ",(0,r.kt)("inlineCode",{parentName:"td"},"purchase"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"[eventConfig[].columns]"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"Object")),(0,r.kt)("td",{parentName:"tr",align:null},"List of columns from GA4 raw table to be added to the final table. You could check the list of all available columns ",(0,r.kt)("a",{parentName:"td",href:"https://support.google.com/analytics/answer/7029846?hl=en"},"here"),". By default columns are added based on the preset. Or you could add them manually using ",(0,r.kt)("inlineCode",{parentName:"td"},"addColumns")," method.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"[eventConfig[].columns.name]"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"String")),(0,r.kt)("td",{parentName:"tr",align:null},"Name of the column in GA4 raw table.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"[eventConfig[].columns.columnName]"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"String")),(0,r.kt)("td",{parentName:"tr",align:null},"Optional. The name of the column in the result table. If not provided the name will be the same as in GA4 raw table.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"[eventConfig[].eventParams]"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"Object")),(0,r.kt)("td",{parentName:"tr",align:null},"List of event params unnested from GA4 raw table event_params column. By default ",(0,r.kt)("inlineCode",{parentName:"td"},"eventParams")," are added based on the preset. You could add your custom event_params using ",(0,r.kt)("inlineCode",{parentName:"td"},"addEventParams")," method.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"[eventConfig[].eventParams.name]"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"String")),(0,r.kt)("td",{parentName:"tr",align:null},"The value of ",(0,r.kt)("inlineCode",{parentName:"td"},"key")," in the event_params record.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"[eventParams[].columnName]"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"String")),(0,r.kt)("td",{parentName:"tr",align:null},"Optional. The name of the column in the result table. If not provided the name will be the same as ",(0,r.kt)("inlineCode",{parentName:"td"},"eventParams.name"),".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"[eventConfig[].eventParams.type]"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"'","string","'")," ","|"," ",(0,r.kt)("code",null,"'","int","'")," ","|"," ",(0,r.kt)("code",null,"'","double","'")," ","|"," ",(0,r.kt)("code",null,"'","float","'")," ","|"," ",(0,r.kt)("code",null,"'","coalesce","'")," ","|"," ",(0,r.kt)("code",null,"'","coalesce","_","float","'")),(0,r.kt)("td",{parentName:"tr",align:null},"Optional. The name of the value in the event_params column. By default ",(0,r.kt)("inlineCode",{parentName:"td"},"string"),".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"[eventConfig[].userProperties]"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"Object")),(0,r.kt)("td",{parentName:"tr",align:null},"List of user properties unnested from GA4 raw table user_properties column. By default ",(0,r.kt)("inlineCode",{parentName:"td"},"userProperties")," are not added. You could add your custom user_properties using ",(0,r.kt)("inlineCode",{parentName:"td"},"addUserProperties")," method.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"[eventConfig[].userProperties.name]"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"String")),(0,r.kt)("td",{parentName:"tr",align:null},"The value of ",(0,r.kt)("inlineCode",{parentName:"td"},"key")," in the user_properties record.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"[eventConfig[].userProperties.columnName]"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"String")),(0,r.kt)("td",{parentName:"tr",align:null},"Optional. The name of the column in the result table. If not provided the name will be the same as ",(0,r.kt)("inlineCode",{parentName:"td"},"userProperties.name"),".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"[eventConfig[].userProperties.type]"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"'","string","'")," ","|"," ",(0,r.kt)("code",null,"'","int","'")," ","|"," ",(0,r.kt)("code",null,"'","double","'")," ","|"," ",(0,r.kt)("code",null,"'","float","'")," ","|"," ",(0,r.kt)("code",null,"'","coalesce","'")," ","|"," ",(0,r.kt)("code",null,"'","coalesce","_","float","'")),(0,r.kt)("td",{parentName:"tr",align:null},"Optional. The name of the value in the event_params column. By default ",(0,r.kt)("inlineCode",{parentName:"td"},"string"),".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"[eventConfig[].queryParameters]"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"Object")),(0,r.kt)("td",{parentName:"tr",align:null},"List of query parameters from the unnested ",(0,r.kt)("inlineCode",{parentName:"td"},"event_params")," column with the key ",(0,r.kt)("inlineCode",{parentName:"td"},"page_location"),". You could add your custom query_parameters using ",(0,r.kt)("inlineCode",{parentName:"td"},"addQueryParameters")," method.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"[eventConfig[].queryParameters.name]"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"String")),(0,r.kt)("td",{parentName:"tr",align:null},"The query parameter name.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"[eventConfig[].queryParameters.columnName]"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"String")),(0,r.kt)("td",{parentName:"tr",align:null},"Optional. The name of the column in the result table. If not provided the name will be the same as ",(0,r.kt)("inlineCode",{parentName:"td"},"queryParameters[].name"),".")))),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Example"),"  "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"// Create events\nlet events = ef.createEvents(configs);\n// Publish events\nevents.forEach(event => event.publish());\n")),(0,r.kt)("a",{name:"module_dataform-ga4-sessions..EventFactory+createEcommerceEvents"}),(0,r.kt)("h4",{id:"eventfactorycreateecommerceevents--arrayevent"},"eventFactory.createEcommerceEvents() \u21d2 ",(0,r.kt)("code",null,"Array.","<","Event",">")),(0,r.kt)("p",null,"The method to create all recommended ecommerce events."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Kind"),": instance method of ",(0,r.kt)("a",{parentName:"p",href:"#module_dataform-ga4-sessions..EventFactory"},(0,r.kt)("code",null,"EventFactory")),(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("strong",{parentName:"p"},"Returns"),": ",(0,r.kt)("code",null,"Array.","<","Event",">")," - List of events",(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("strong",{parentName:"p"},"Example"),"  "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'// Define your config\nconst eventConfig = {\ndataset: "analytics_XXXXXX",\nincrementalTableName: "events_XXXXXX",\n};\n// Create all recommended events\nlet events = ef.createEcommerceEvents();\n// Publish events\n events.forEach(event => event.publish());\n')),(0,r.kt)("a",{name:"module_dataform-ga4-sessions..EventFactory+createFormEvents"}),(0,r.kt)("h4",{id:"eventfactorycreateformevents--arrayevent"},"eventFactory.createFormEvents() \u21d2 ",(0,r.kt)("code",null,"Array.","<","Event",">")),(0,r.kt)("p",null,"The method to create all recommended events for form tracking."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Kind"),": instance method of ",(0,r.kt)("a",{parentName:"p",href:"#module_dataform-ga4-sessions..EventFactory"},(0,r.kt)("code",null,"EventFactory")),(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("strong",{parentName:"p"},"Returns"),": ",(0,r.kt)("code",null,"Array.","<","Event",">")," - List of events",(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("strong",{parentName:"p"},"Example"),"  "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'// Define your config\nconst eventConfig = {\ndataset: "analytics_XXXXXX",\nincrementalTableName: "events_XXXXXX",\n};\n// Create all recommended events\nlet events = ef.createFormEvents();\n// Publish events\n events.forEach(event => event.publish());\n')),(0,r.kt)("a",{name:"module_dataform-ga4-sessions..EventFactory+createAllRecommendedEvents"}),(0,r.kt)("h4",{id:"eventfactorycreateallrecommendedevents--arrayevent"},"eventFactory.createAllRecommendedEvents() \u21d2 ",(0,r.kt)("code",null,"Array.","<","Event",">")),(0,r.kt)("p",null,"The method to create all recommended and auto events."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Kind"),": instance method of ",(0,r.kt)("a",{parentName:"p",href:"#module_dataform-ga4-sessions..EventFactory"},(0,r.kt)("code",null,"EventFactory")),(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("strong",{parentName:"p"},"Returns"),": ",(0,r.kt)("code",null,"Array.","<","Event",">")," - List of events",(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("strong",{parentName:"p"},"Example"),"  "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'// Define your config\nconst eventConfig = {\ndataset: "analytics_XXXXXX",\nincrementalTableName: "events_XXXXXX",\n};\n// Create all recommended events\nlet events = ef.createAllRecommendedEvents();\n// Publish events\n events.forEach(event => event.publish());\n')),(0,r.kt)("a",{name:"module_dataform-ga4-sessions..Session"}),(0,r.kt)("h3",{id:"dataform-ga4-sessionssession--dataformaction"},"dataform-ga4-sessions~Session \u21d0 ",(0,r.kt)("code",null,"DataformAction")),(0,r.kt)("p",null,"Creates Dataform Action to build GA4 Session tables based on BigQuery exported data. The class extends DataformAction class."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Kind"),": inner class of ",(0,r.kt)("a",{parentName:"p",href:"#module_dataform-ga4-sessions"},(0,r.kt)("code",null,"dataform-ga4-sessions")),(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("strong",{parentName:"p"},"Extends"),": ",(0,r.kt)("code",null,"DataformAction"),"  "),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..Session"},"~Session")," \u21d0 ",(0,r.kt)("code",null,"DataformAction"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#new_module_dataform-ga4-sessions..Session_new"},"new Session(sourceConfig, targetConfig)")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..Session+_uniqueKey"},"._uniqueKey")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..Session+_sourceMediumRules"},"._sourceMediumRules")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..Session+_postProcessing"},"._postProcessing")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..Session+_processingSteps"},"._processingSteps")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..Session+_lastNonDirectLookBackWindow"},"._lastNonDirectLookBackWindow")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..Session+_assertions"},"._assertions")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..Session+applyPreset"},".applyPreset(presetName)")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..Session+getSqlUniqueId"},".getSqlUniqueId()")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..Session+skipLastNonDirectStep"},".skipLastNonDirectStep()")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..Session+skipChannelStep"},".skipChannelStep()")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..Session+skipSourceMediumStep"},".skipSourceMediumStep()")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..Session+publish"},".publish()")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#module_dataform-ga4-sessions..Session+publishAssertions"},".publishAssertions()"))))),(0,r.kt)("a",{name:"new_module_dataform-ga4-sessions..Session_new"}),(0,r.kt)("h4",{id:"new-sessionsourceconfig-targetconfig"},"new Session(sourceConfig, targetConfig)"),(0,r.kt)("p",null,"Constructor for the Session class inherited from DataformAction class. And set default values for additional properties needed for the Session Action and also apply ",(0,r.kt)("inlineCode",{parentName:"p"},"standard")," presets. Before creating the object of this class you need to declare GA4 source tables using ",(0,r.kt)("inlineCode",{parentName:"p"},"declareSources")," method."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Param"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"sourceConfig"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"Object")),(0,r.kt)("td",{parentName:"tr",align:null},"GA4 BigQuery Source configuration")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"sourceConfig.database"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"string")),(0,r.kt)("td",{parentName:"tr",align:null},"The GA4 export database name. For example ",(0,r.kt)("inlineCode",{parentName:"td"},"<YOUR-GCP-PROJECT-ID>"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"sourceConfig.dataset"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"string")),(0,r.kt)("td",{parentName:"tr",align:null},"The GA4 export database name. For example ",(0,r.kt)("inlineCode",{parentName:"td"},"<YOUR-GCP-PROJECT-ID>"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"sourceConfig.incrementalTableName"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"string")),(0,r.kt)("td",{parentName:"tr",align:null},"Source incremental table name. For example ",(0,r.kt)("inlineCode",{parentName:"td"},"events_20240101"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"sourceConfig.nonIncrementalTableName"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"string")),(0,r.kt)("td",{parentName:"tr",align:null},"Source non-incremental table name. For example ",(0,r.kt)("inlineCode",{parentName:"td"},"events_*"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"sourceConfig.incrementalTableEventStepWhere"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"string")),(0,r.kt)("td",{parentName:"tr",align:null},"This property set where condition for the incremental queries. The important note this condition is added to the first step, not the final step. So if you filter for example events with source / medium values you could miss this data in the final result. Default is false")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"sourceConfig.nonIncrementalTableEventStepWhere"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"string")),(0,r.kt)("td",{parentName:"tr",align:null},"This property set where condition for the non-incremental queries. The important note this condition is added to the first step, not the final step. So if you filter for example events with source / medium values you could miss this data in the final result. Default is false")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"targetConfig"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"Object")),(0,r.kt)("td",{parentName:"tr",align:null},"Optional. Target configuration")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"targetConfig.schema"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"string")),(0,r.kt)("td",{parentName:"tr",align:null},"Optional. Target schema name. Default is ",(0,r.kt)("inlineCode",{parentName:"td"},"dataform_staging"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"targetConfig.tableName"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"string")),(0,r.kt)("td",{parentName:"tr",align:null},"Optional. Target table name. Default is ",(0,r.kt)("inlineCode",{parentName:"td"},"sessions"))))),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Example"),"  "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'// Define your config\nconst sessionConfig = {\ndataset: "analytics_XXXXXX",\nincrementalTableName: "events_XXXXXX",\n};\n\n// Declare GA4 source tables\nga4.declareSources(sessionConfig);\n\n// Create sessions object\nconst sessions = new ga4.Session(sessionConfig);\n')),(0,r.kt)("a",{name:"module_dataform-ga4-sessions..Session+_uniqueKey"}),(0,r.kt)("h4",{id:"session_uniquekey"},"session.","_","uniqueKey"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Kind"),": instance property of ",(0,r.kt)("a",{parentName:"p",href:"#module_dataform-ga4-sessions..Session"},(0,r.kt)("code",null,"Session")),(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("strong",{parentName:"p"},"Properties")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"uniqueKey"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"string")),(0,r.kt)("td",{parentName:"tr",align:null},"The ",(0,r.kt)("a",{parentName:"td",href:"https://cloud.google.com/dataform/docs/incremental-tables#merge_rows_in_an_incremental_table"},"unique key")," for incremental tables. Dataform use this keys to generate merge queries. Default value for Session is ",(0,r.kt)("inlineCode",{parentName:"td"},'["date", "session_id"]'))))),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Example"),"  "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'session.uniqueKey = ["session_id","date"]\n')),(0,r.kt)("a",{name:"module_dataform-ga4-sessions..Session+_sourceMediumRules"}),(0,r.kt)("h4",{id:"session_sourcemediumrules"},"session.","_","sourceMediumRules"),(0,r.kt)("p",null,"The order of sourceMediumRules is important, the first rule that meets the condition will be applied."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Kind"),": instance property of ",(0,r.kt)("a",{parentName:"p",href:"#module_dataform-ga4-sessions..Session"},(0,r.kt)("code",null,"Session")),(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("strong",{parentName:"p"},"Properties")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"sourceMediumRules"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"Array.","<","Object",">")),(0,r.kt)("td",{parentName:"tr",align:null},"The source medium rules. Default is defaultSourceMediumRules from ",(0,r.kt)("inlineCode",{parentName:"td"},"includes/constants.js"),". This property is used to create a source medium columns in the final table.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"sourceMediumRules[].columns"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"Array.","<","String",">")),(0,r.kt)("td",{parentName:"tr",align:null},"The rule will check columns from the list in the final table.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"sourceMediumRules[].conditionType"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"'","NOT","_","NULL","'")),(0,r.kt)("td",{parentName:"tr",align:null},"The rule condition type define the logic how to check columns. At the moment only ",(0,r.kt)("inlineCode",{parentName:"td"},"NOT_NULL")," is supported.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"sourceMediumRules[].conditionValue"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"String")),(0,r.kt)("td",{parentName:"tr",align:null},"The rule expected value. Not used by ",(0,r.kt)("inlineCode",{parentName:"td"},"NOT_NULL")," condition type.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"sourceMediumRules[].value"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"Object")),(0,r.kt)("td",{parentName:"tr",align:null},"The value of source medium that should be set in the final table if condition is met.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"sourceMediumRules[].value.source"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"String")),(0,r.kt)("td",{parentName:"tr",align:null},"The source value that should be set. If the value should be literal it should be in the single quotes. For example ",(0,r.kt)("inlineCode",{parentName:"td"},'"\'google\'""')," otherwise it should be a column name from the final table for example ",(0,r.kt)("inlineCode",{parentName:"td"},'"source"'),".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"sourceMediumRules[].value.medium"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"String")),(0,r.kt)("td",{parentName:"tr",align:null},"The medium value that should be set.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"sourceMediumRules[].value.campaign"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"String")),(0,r.kt)("td",{parentName:"tr",align:null},"The campaign value that should be set.")))),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Example"),"  "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'sessions.sourceMediumRules = [\n {\n  columns: ["gclid_url"],\n conditionType: "NOT_NULL",\n conditionValue: "",\n value: {\n  source: "\'google\'",\n  medium: "\'cpc\'",\n  campaign: "campaign",\n },\n},\n...sessions.sourceMediumRules,\n];\n')),(0,r.kt)("a",{name:"module_dataform-ga4-sessions..Session+_postProcessing"}),(0,r.kt)("h4",{id:"session_postprocessing"},"session.","_","postProcessing"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Kind"),": instance property of ",(0,r.kt)("a",{parentName:"p",href:"#module_dataform-ga4-sessions..Session"},(0,r.kt)("code",null,"Session")),(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("strong",{parentName:"p"},"Properties")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"processingSteps"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"Object")),(0,r.kt)("td",{parentName:"tr",align:null},"The post processing config. At the moment only delete is supported.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"processingSteps.delete"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"Array.","<","String",">")),(0,r.kt)("td",{parentName:"tr",align:null},"Columns listed in this property will be deleted from the final table.  By default ",(0,r.kt)("inlineCode",{parentName:"td"},"[source, medium, campaign]")," columns will be delete. Because during ",(0,r.kt)("inlineCode",{parentName:"td"},"sessions_with_source_medium_and_lp")," step and ",(0,r.kt)("inlineCode",{parentName:"td"},"sessions_with_last_non_direct")," these columns also will be added to ",(0,r.kt)("inlineCode",{parentName:"td"},"last_click_attribution")," and ",(0,r.kt)("inlineCode",{parentName:"td"},"last_non_direct_attribution")," accordingly.")))),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Example"),"  "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'sessions.processingSteps = {\ndelete: ["column2", "column2"],\n};\n')),(0,r.kt)("a",{name:"module_dataform-ga4-sessions..Session+_processingSteps"}),(0,r.kt)("h4",{id:"session_processingsteps"},"session.","_","processingSteps"),(0,r.kt)("h3",{id:"default-session-processing-steps"},"Default session processing steps"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Step Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"events"),(0,r.kt)("td",{parentName:"tr",align:null},"Extract the needed columns from all events. Generate session_id")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"sessions_base"),(0,r.kt)("td",{parentName:"tr",align:null},"Group events into sessions by session id. Add standard columns like: session_start, session_end, session_engaged, landing_page etc.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"sessions_with_source_medium_and_lp"),(0,r.kt)("td",{parentName:"tr",align:null},"Apply source / medium rules to create last click attribution")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"sessions_with_channel"),(0,r.kt)("td",{parentName:"tr",align:null},"Add channel grouping based on source / medium")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"sessions_with_last_non_direct"),(0,r.kt)("td",{parentName:"tr",align:null},"Add last non direct attribution based on lookback window")))),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Kind"),": instance property of ",(0,r.kt)("a",{parentName:"p",href:"#module_dataform-ga4-sessions..Session"},(0,r.kt)("code",null,"Session")),(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("strong",{parentName:"p"},"Properties")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"processingSteps"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"Array.","<","Object",">")),(0,r.kt)("td",{parentName:"tr",align:null},"The Session Action create a final table in a few steps. Queries for all default steps are defined in ",(0,r.kt)("inlineCode",{parentName:"td"},"includes/processing_steps.js"),". You could skip any of step using methods below or add custom processing steps.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"processingSteps[].queryName"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"String")),(0,r.kt)("td",{parentName:"tr",align:null},"The name of the step. The name should be unique.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"processingSteps[].query"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"String")),(0,r.kt)("td",{parentName:"tr",align:null},"The Function that generates SQL for the step. The function has two parameters ",(0,r.kt)("inlineCode",{parentName:"td"},"this")," and ",(0,r.kt)("inlineCode",{parentName:"td"},"ctx")," which is ",(0,r.kt)("a",{parentName:"td",href:"https://cloud.google.com/dataform/docs/reference/dataform-core-reference#itablecontext"},"Dataform context"),".")))),(0,r.kt)("a",{name:"module_dataform-ga4-sessions..Session+_lastNonDirectLookBackWindow"}),(0,r.kt)("h4",{id:"session_lastnondirectlookbackwindow"},"session.","_","lastNonDirectLookBackWindow"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Kind"),": instance property of ",(0,r.kt)("a",{parentName:"p",href:"#module_dataform-ga4-sessions..Session"},(0,r.kt)("code",null,"Session")),(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("strong",{parentName:"p"},"Properties")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"lastNonDirectLookBackWindow"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"string")),(0,r.kt)("td",{parentName:"tr",align:null},"The last non direct look back window, if session has direct source / medium, a sessions_with_last_non_direct processing step tries to find previous non direct sessions inside the look back window. Default is 30 days. This property is used to create a last_non_direct_attribution columns in the final table.")))),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Example"),"  "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"sessions.lastNonDirectLookBackWindow = 60\n")),(0,r.kt)("a",{name:"module_dataform-ga4-sessions..Session+_assertions"}),(0,r.kt)("h4",{id:"session_assertions"},"session.","_","assertions"),(0,r.kt)("h3",{id:"default-session-assertions"},"Default session assertions"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Sessions Timeliness"),(0,r.kt)("td",{parentName:"tr",align:null},"Check that we have fresh sessions with a delay of no more than 2 days")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Sessions Completeness"),(0,r.kt)("td",{parentName:"tr",align:null},"Check that we have sessions for all days without gaps")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Sessions Validity"),(0,r.kt)("td",{parentName:"tr",align:null},"Check that sessions have all the required columns")))),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Kind"),": instance property of ",(0,r.kt)("a",{parentName:"p",href:"#module_dataform-ga4-sessions..Session"},(0,r.kt)("code",null,"Session")),(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("strong",{parentName:"p"},"Properties")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"assertions"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,"Array.","<","{name: String, config: {description: String}, query: function(String): String}",">")),(0,r.kt)("td",{parentName:"tr",align:null},"List of default ",(0,r.kt)("a",{parentName:"td",href:"https://cloud.google.com/dataform/docs/assertions"},"Dataform assertions")," for the class, but in most cases if you need extra assertions you could define them outside the class in separate files.")))),(0,r.kt)("a",{name:"module_dataform-ga4-sessions..Session+applyPreset"}),(0,r.kt)("h4",{id:"sessionapplypresetpresetname"},"session.applyPreset(presetName)"),(0,r.kt)("p",null,"The function add list of columns, event_params and user_properties to the final table based on the preset."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Kind"),": instance method of ",(0,r.kt)("a",{parentName:"p",href:"#module_dataform-ga4-sessions..Session"},(0,r.kt)("code",null,"Session")),"  "),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Param"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"presetName"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("code",null,'"',"standard",'"')," ","|"," ",(0,r.kt)("code",null,'"',"extended",'"')," ","|"," ",(0,r.kt)("code",null,'"',"none",'"')),(0,r.kt)("td",{parentName:"tr",align:null},"The name of the preset. The following presets are available: ",(0,r.kt)("inlineCode",{parentName:"td"},"standard"),", ",(0,r.kt)("inlineCode",{parentName:"td"},"extended"),", ",(0,r.kt)("inlineCode",{parentName:"td"},"none"),". Default is ",(0,r.kt)("inlineCode",{parentName:"td"},"standard"),".")))),(0,r.kt)("a",{name:"module_dataform-ga4-sessions..Session+getSqlUniqueId"}),(0,r.kt)("h4",{id:"sessiongetsqluniqueid"},"session.getSqlUniqueId()"),(0,r.kt)("p",null,"Helper method to generate SQL code to get unique id for each row in a final table, used inside publish method. By default it use getSqlSessionId from dataform-ga4-helpers package"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Kind"),": instance method of ",(0,r.kt)("a",{parentName:"p",href:"#module_dataform-ga4-sessions..Session"},(0,r.kt)("code",null,"Session")),"  "),(0,r.kt)("a",{name:"module_dataform-ga4-sessions..Session+skipLastNonDirectStep"}),(0,r.kt)("h4",{id:"sessionskiplastnondirectstep"},"session.skipLastNonDirectStep()"),(0,r.kt)("p",null,"The method skips ",(0,r.kt)("inlineCode",{parentName:"p"},"sessions_with_last_non_direct")," processing step."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Kind"),": instance method of ",(0,r.kt)("a",{parentName:"p",href:"#module_dataform-ga4-sessions..Session"},(0,r.kt)("code",null,"Session")),(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("strong",{parentName:"p"},"Example"),"  "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"sessions.skipLastNonDirectStep();\n")),(0,r.kt)("a",{name:"module_dataform-ga4-sessions..Session+skipChannelStep"}),(0,r.kt)("h4",{id:"sessionskipchannelstep"},"session.skipChannelStep()"),(0,r.kt)("p",null,"The method skips ",(0,r.kt)("inlineCode",{parentName:"p"},"sessions_with_channel")," processing step. It should be called only after ",(0,r.kt)("inlineCode",{parentName:"p"},"skipLastNonDirectStep")," as it depends on it. Also if this method is called a table with channels definitions created by ",(0,r.kt)("inlineCode",{parentName:"p"},"helpers.getSqlSourceCategoriesTable")," wouldn't be added."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Kind"),": instance method of ",(0,r.kt)("a",{parentName:"p",href:"#module_dataform-ga4-sessions..Session"},(0,r.kt)("code",null,"Session")),(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("strong",{parentName:"p"},"Example"),"  "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"sessions.skipLastNonDirectStep();\nsessions.skipChannelStep();\n")),(0,r.kt)("a",{name:"module_dataform-ga4-sessions..Session+skipSourceMediumStep"}),(0,r.kt)("h4",{id:"sessionskipsourcemediumstep"},"session.skipSourceMediumStep()"),(0,r.kt)("p",null,"The method skip ",(0,r.kt)("inlineCode",{parentName:"p"},"sessions_with_source_medium_and_lp")," processing step. This method should be used if you want to create your own source / medium attribution logic. The order is important as each step uses the preceding step. So you can't skip the channel step and have a last_non_direct step. But you could delete all the steps, and add your own processing steps."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Kind"),": instance method of ",(0,r.kt)("a",{parentName:"p",href:"#module_dataform-ga4-sessions..Session"},(0,r.kt)("code",null,"Session")),(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("strong",{parentName:"p"},"Example"),"  "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"// Ignore all processing steps except the first\nsessions.skipLastNonDirectStep();\nsessions.skipChannelStep();\nsessions.skipSourceMediumStep();\n")),(0,r.kt)("a",{name:"module_dataform-ga4-sessions..Session+publish"}),(0,r.kt)("h4",{id:"sessionpublish"},"session.publish()"),(0,r.kt)("p",null,"Main method to publish Dataform Action. This method generates SQL and then uses Dataform core ",(0,r.kt)("a",{parentName:"p",href:"https://cloud.google.com/dataform/docs/reference/dataform-core-reference#publish"},"publish")," method to generate incremental and non-incremental session table."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Kind"),": instance method of ",(0,r.kt)("a",{parentName:"p",href:"#module_dataform-ga4-sessions..Session"},(0,r.kt)("code",null,"Session")),(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("strong",{parentName:"p"},"Example"),"  "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"session.publish()\n")),(0,r.kt)("a",{name:"module_dataform-ga4-sessions..Session+publishAssertions"}),(0,r.kt)("h4",{id:"sessionpublishassertions"},"session.publishAssertions()"),(0,r.kt)("p",null,"The method to publish default ",(0,r.kt)("a",{parentName:"p",href:"https://cloud.google.com/dataform/docs/assertions"},"Dataform assertions"),"."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Kind"),": instance method of ",(0,r.kt)("a",{parentName:"p",href:"#module_dataform-ga4-sessions..Session"},(0,r.kt)("code",null,"Session")),(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("strong",{parentName:"p"},"Example"),"  "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"session.publishAssertions()\n")))}d.isMDXComponent=!0}}]);